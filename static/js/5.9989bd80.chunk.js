(this.webpackJsonpoptiweb_moi=this.webpackJsonpoptiweb_moi||[]).push([[5],{244:function(e,t,a){},316:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/flicker.aac0b453.gif"},396:function(e){e.exports=JSON.parse('{"id":"2911993","name":"CD\u7eb8\u673a","font_family":"iconfont","css_prefix_text":"icon-","description":"","glyphs":[{"icon_id":"27285732","name":"zhongliang","font_class":"zhongliang","unicode":"e67c","unicode_decimal":59004},{"icon_id":"27285178","name":"daochu","font_class":"daochu","unicode":"e679","unicode_decimal":59001},{"icon_id":"27285179","name":"daoru","font_class":"daoru","unicode":"e67b","unicode_decimal":59003},{"icon_id":"27282819","name":"icon-zhengqiyali","font_class":"zhengqiyali","unicode":"e678","unicode_decimal":59000},{"icon_id":"27282821","name":"icon-yijianqiting","font_class":"yijianqiting","unicode":"e67a","unicode_decimal":59002},{"icon_id":"27282783","name":"icon-baocun","font_class":"baocun","unicode":"e654","unicode_decimal":58964},{"icon_id":"27282784","name":"icon-celiang","font_class":"celiang","unicode":"e655","unicode_decimal":58965},{"icon_id":"27282785","name":"icon-baojing","font_class":"baojing","unicode":"e656","unicode_decimal":58966},{"icon_id":"27282786","name":"icon-dianli","font_class":"dianli","unicode":"e657","unicode_decimal":58967},{"icon_id":"27282787","name":"icon-bihuan","font_class":"bihuan","unicode":"e658","unicode_decimal":58968},{"icon_id":"27282788","name":"icon-bihuanchuzhi","font_class":"bihuanchuzhi","unicode":"e659","unicode_decimal":58969},{"icon_id":"27282789","name":"icon-gengxin","font_class":"gengxin","unicode":"e65a","unicode_decimal":58970},{"icon_id":"27282790","name":"icon-huanyuan","font_class":"huanyuan","unicode":"e65b","unicode_decimal":58971},{"icon_id":"27282791","name":"icon-ganying","font_class":"ganying","unicode":"e65c","unicode_decimal":58972},{"icon_id":"27282792","name":"icon-fangqiruzhi","font_class":"fangqiruzhi","unicode":"e65d","unicode_decimal":58973},{"icon_id":"27282793","name":"icon-shujuhuifu","font_class":"shujuhuifu","unicode":"e65e","unicode_decimal":58974},{"icon_id":"27282794","name":"icon-mima","font_class":"mima","unicode":"e65f","unicode_decimal":58975},{"icon_id":"27282795","name":"icon-kaihuan","font_class":"kaihuan","unicode":"e660","unicode_decimal":58976},{"icon_id":"27282796","name":"icon-shiyangshuifen","font_class":"shiyangshuifen","unicode":"e661","unicode_decimal":58977},{"icon_id":"27282797","name":"icon-piciguanli","font_class":"piciguanli","unicode":"e662","unicode_decimal":58978},{"icon_id":"27282798","name":"icon-shijian","font_class":"shijian","unicode":"e663","unicode_decimal":58979},{"icon_id":"27282799","name":"icon-yonghu","font_class":"yonghu","unicode":"e664","unicode_decimal":58980},{"icon_id":"27282800","name":"icon-shengchanshebei","font_class":"shengchanshebei","unicode":"e665","unicode_decimal":58981},{"icon_id":"27282801","name":"icon-pilianggengxin","font_class":"pilianggengxin","unicode":"e666","unicode_decimal":58982},{"icon_id":"27282802","name":"icon-sudu","font_class":"sudu","unicode":"e667","unicode_decimal":58983},{"icon_id":"27282803","name":"icon-xiangxia","font_class":"xiangxia","unicode":"e668","unicode_decimal":58984},{"icon_id":"27282804","name":"icon-yonghu1","font_class":"yonghu1","unicode":"e669","unicode_decimal":58985},{"icon_id":"27282805","name":"icon-zhiji","font_class":"zhiji","unicode":"e66a","unicode_decimal":58986},{"icon_id":"27282806","name":"icon-xieru","font_class":"xieru","unicode":"e66b","unicode_decimal":58987},{"icon_id":"27282807","name":"icon-chongliuliang","font_class":"chongliuliang","unicode":"e66c","unicode_decimal":58988},{"icon_id":"27282808","name":"icon-zhongzhimima","font_class":"zhongzhimima","unicode":"e66d","unicode_decimal":58989},{"icon_id":"27282809","name":"icon-xitonggengxinrizhi","font_class":"xitonggengxinrizhi","unicode":"e66e","unicode_decimal":58990},{"icon_id":"27282810","name":"icon-xiaofangliliangtiaodu","font_class":"xiaofangliliangtiaodu","unicode":"e66f","unicode_decimal":58991},{"icon_id":"27282811","name":"icon-PLCzhihangqi","font_class":"PLCzhihangqi","unicode":"e670","unicode_decimal":58992},{"icon_id":"27282812","name":"icon-zuojiantou","font_class":"zuojiantou","unicode":"e671","unicode_decimal":58993},{"icon_id":"27282813","name":"icon-ziyuanxhdpi","font_class":"ziyuanxhdpi","unicode":"e672","unicode_decimal":58994},{"icon_id":"27282814","name":"icon-zhengqi","font_class":"zhengqi","unicode":"e673","unicode_decimal":58995},{"icon_id":"27282815","name":"icon-yingyong","font_class":"yingyong","unicode":"e674","unicode_decimal":58996},{"icon_id":"27282816","name":"icon-kuaizhao","font_class":"kuaizhao","unicode":"e675","unicode_decimal":58997},{"icon_id":"27282817","name":"icon-liuliangquan","font_class":"liuliangquan","unicode":"e676","unicode_decimal":58998},{"icon_id":"27282818","name":"icon-xitongyingyong","font_class":"xitongyingyong","unicode":"e677","unicode_decimal":58999}]}')},398:function(e,t,a){},404:function(e,t,a){},411:function(e,t,a){},412:function(e,t,a){},479:function(e,t,a){},481:function(e,t,a){},482:function(e,t,a){},487:function(e,t,a){},499:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/paper-company.950c0a27.svg"},500:function(e,t,a){},501:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/paper-machine.20d3f930.svg"},535:function(e,t,a){},536:function(e,t,a){},537:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/engine-stop.21a7485e.png"},538:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/engine-start.a4d2e40a.gif"},541:function(e,t,a){},560:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"Home",(function(){return yt})),a.d(n,"PaperMonitor",(function(){return St})),a.d(n,"ControlMonitor",(function(){return Yt})),a.d(n,"DataPreview",(function(){return qt}));var i=a(89),c=(a(156),a(155)),o=a(12),r=(a(286),a(318)),s=a(77),l=a(0),u=a.n(l),d=a(22),b=a(10),j=u.a.createContext(void 0),O=function(e){var t=Object(l.useState)(!1),a=Object(s.a)(t,2),n=a[0],i=a[1],c=Object(l.useMemo)((function(){return{show:function(){return i(!0)},close:function(){return i(!1)}}}),[]),O=e.fullModal,m=e.slot,f=e.slotClass,h=e.slotStyle,v=Object(d.omit)(e,["className","disabled","slot","slotStyle","slotClass","children"]);return Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsx)("div",{onClick:function(){!e.disabled&&i(!0)},className:f,style:h,children:m}),Object(b.jsx)(r.a,Object(o.a)(Object(o.a)({},v),{},{visible:n,onOk:function(){if(e.onOk instanceof Function){var t=e.onOk();t instanceof Promise?t.then((function(){i(!1)})):i(!!t)}else i(!1)},onCancel:function(){e.onCancel instanceof Function&&e.onCancel(),i(!1)},className:"".concat(e.className," ").concat(O?"full-height":""),children:Object(b.jsx)(j.Provider,{value:c,children:e.children})}))]})};O.defaultProps={destroyOnClose:!0,title:"\u57fa\u672c\u5f39\u6846",width:"80%",footer:null,disabled:!1,fullModal:!1,slot:Object(b.jsx)(c.a,{children:"\u6309\u94ae"}),slotClass:"form-modal__slot",slotStyle:{display:"inline-block",cursor:"pointer"}};var m=O,f=a(565),h=a(396),v=h.css_prefix_text,x=h.glyphs.map((function(e){return"".concat(v).concat(e.font_class)})),p=function(e){var t=Object(l.useMemo)((function(){return x.find((function(t){return t===e.type}))||e.defaultIcon}),[e.type,e.defaultIcon]),a=e.size,n=void 0===a?14:a,i=e.allowBlank,c=void 0!==i&&i,r=e.className,s=e.style;return t?Object(b.jsx)("i",{className:"iconfont ".concat(t," ").concat(r),style:Object(o.a)({fontSize:n,lineHeight:1},s)}):c?null:Object(b.jsx)(f.a,{className:r,style:Object(o.a)({fontSize:n},s)})},g=a(105),I=a.n(g),_=function(e){var t=Object(l.useState)(I()().format("YYYY-MM-DD HH:mm:ss")),a=Object(s.a)(t,2),n=a[0],i=a[1];return Object(l.useEffect)((function(){var e=setInterval((function(){i(I()().format("YYYY-MM-DD HH:mm:ss"))}),1e3);return function(){return clearInterval(e)}}),[]),Object(b.jsx)("span",{className:e.className,style:e.style,children:"".concat(e.extraFont).concat(n)})},N=a(397),C=a(190);function y(e){var t=Object(l.useRef)(e);return t.current=e,t}function A(e){var t=Object(l.useRef)();return Object(l.useEffect)((function(){t.current=e})),t.current}function E(e){var t=Object(l.useState)({clientWidth:0,clientHeight:0}),a=Object(s.a)(t,2),n=a[0],i=a[1];return Object(l.useEffect)((function(){if(null===e||void 0===e?void 0:e.current){var t=-1,a=new C.a((function(e){var a,n=Object(N.a)(e);try{var c=function(){var e=a.value;clearTimeout(t),t=setTimeout((function(){var t=e.target,a={clientWidth:t.clientWidth,clientHeight:t.clientHeight};i((function(e){return Object(d.isEqual)(e,a)?e:a}))}),200)};for(n.s();!(a=n.n()).done;)c()}catch(o){n.e(o)}finally{n.f()}}));return a.observe(e.current),function(){clearTimeout(t),a.disconnect()}}}),[]),n}var T=function(e){var t=Object(l.useState)(0),a=Object(s.a)(t,2),n=a[0],i=a[1],c=y(e.onCountChange);Object(l.useEffect)((function(){var e;null===(e=c.current)||void 0===e||e.call(c,n)}),[n]);var o=y(e.onCountDone);Object(l.useEffect)((function(){var t=e.seconds,a=e.targetCount,n=void 0===a?0:a,c=e.revert;if(t){i(t);var r=setInterval((function(){var e;(i(c?++t:--t),t===n)&&(clearInterval(r),null===(e=o.current)||void 0===e||e.call(o))}),1e3);return function(){return clearInterval(r)}}i(0)}),[e.seconds,e.targetCount,e.revert]);var r=Object(l.useMemo)((function(){return function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a;return"".concat(t<10?"0"+t:t,":").concat(a<10?"0"+a:a,":").concat(n<10?"0"+n:n)}(n)}),[n]);return Object(b.jsx)("span",{className:e.className,style:e.style,children:"".concat(e.extraFont).concat(r)})},M=(a(398),function(e){return Object(b.jsxs)("div",{className:"title ".concat(e.className||""),style:e.style,children:[Object(b.jsx)("div",{className:"title__divide",style:{backgroundColor:e.color}}),Object(b.jsx)("span",{className:"title__title",style:{color:e.color},children:e.title})]})}),S=(a(289),a(292)),P=(a(290),a(320)),D=(a(291),a(294)),w=(a(402),a(547)),L=(a(173),a(176)),R=(a(404),L.a.Option),V=w.a.Paragraph;function z(e){var t=Object(l.useState)([]),a=Object(s.a)(t,2),n=a[0],i=a[1],c=Object(l.useState)(0),r=Object(s.a)(c,2),u=r[0],j=r[1],O=Object(l.useState)(!1),m=Object(s.a)(O,2),f=m[0],h=m[1],v=Object(l.useState)(""),x=Object(s.a)(v,2),p=x[0],g=x[1],I=Object(l.useState)([]),_=Object(s.a)(I,2),N=_[0],C=_[1],y=Object(d.debounce)((function(e){g(e),F(1)}),e.debounceTime);Object(l.useEffect)((function(){C(n)}),[n]);var A=Object(l.useState)(""),E=Object(s.a)(A,2),T=E[0],M=E[1];Object(l.useEffect)((function(){T!==e.value&&(M(e.value),F(1))}),[e.value,T]);var w=Object(l.useState)(1),z=Object(s.a)(w,2),k=z[0],F=z[1],Y=Object(l.useState)([]),W=Object(s.a)(Y,1)[0];Object(l.useEffect)((function(){W.length&&W[0].done||W.push({done:!1,doing:!1,func:function(){var t=e.name,a=e.remoteMethod,n=e.dataField,c=void 0===n?"":n,o=e.dataTotalField,r=void 0===o?"":o;return a instanceof Function?a({name:t,initSearch:T,search:p,current:k}).then((function(e){e&&e.IsSuccessful&&(i(Object(d.get)(e,c)),j(Object(d.get)(e,r)))})):Promise.resolve()}}),function e(t){t[0].done||t[0].doing||(t[0].doing=!0,h(!0),t[0].func().finally((function(){h(!1),t.splice(0,1),t.length&&e(t)})))}(W)}),[T,p,k]);var B=e.value,U=e.selectProps,H=e.paginationProps,G=e.optionKeyField,q=void 0===G?"":G,Q=e.optionLabelField,Z=void 0===Q?"":Q;return Object(b.jsx)(L.a,Object(o.a)(Object(o.a)({loading:f},U),{},{value:B,showSearch:!0,filterOption:!1,onSearch:function(t){var a=e.optionKeyField,i=void 0===a?"":a,c=e.optionLabelField,o=void 0===c?"":c;if(t){var r=n.filter((function(e){return-1!==e[i].toLowerCase().indexOf(t.toLowerCase())||-1!==e[o].toLowerCase().indexOf(t.toLowerCase())}));r.length?C(r):y(t)}else y("")},onChange:function(t){var a=e.onChange;a instanceof Function&&a(t)},dropdownRender:function(e){return Object(b.jsxs)(S.a,{spinning:U.loading||f,children:[e,Object(b.jsx)(D.a,{style:{margin:"4px 0"}}),Object(b.jsx)(P.a,Object(o.a)(Object(o.a)({size:"small",total:u,style:{textAlign:"center"}},H),{},{current:k,onChange:function(e){return F(e)}}))]})},style:e.style,children:N.map((function(e){var t=Object(d.get)(e,Z),a=Object(d.get)(e,q);return Object(b.jsx)(R,{value:a,title:t,children:Object(b.jsxs)("div",{className:"text-overflow pagination-select__option",children:[Object(b.jsx)("span",{children:t}),Object(b.jsx)(V,{onClick:function(e){return e.stopPropagation()},copyable:{text:t,tooltips:["\u590d\u5236","\u6210\u529f"]},className:"pagination-select__copyable"})]})},a)}))}))}z.defaultProps={name:"",value:"",remoteMethod:function(){return[]},onChange:function(){return[]},selectProps:{loading:!1,defaultActiveFirstOption:!1,placeholder:"\u8bf7\u9009\u62e9"},paginationProps:{},dataField:"Data",dataTotalField:"TotalCount",optionKeyField:"ID",optionLabelField:"NAME",debounceTime:500,style:{width:"100%"}};var k=z,F=(a(411),function(e){var t=Object(l.useState)(e.loading),a=Object(s.a)(t,2),n=a[0],i=a[1],c=Object(l.useState)(0),o=Object(s.a)(c,2),r=o[0],u=o[1],d=Object(l.useState)(!1),j=Object(s.a)(d,2),O=j[0],m=j[1];return Object(l.useEffect)((function(){var t=-1,a=r>80?.01:r>60?.04:r>40?.1:r>20?.2:.5;return e.loading?O?(i(!0),t=setTimeout((function(){r<=90&&u(r+a)}),10)):t=setTimeout((function(){m(!0)}),e.delay||200):(i(!1),u(0),m(!1)),function(){return clearTimeout(t)}}),[e.loading,r,O]),n?Object(b.jsx)("div",{className:"loading",children:Object(b.jsxs)("div",{className:"loading__content",children:[Object(b.jsx)("div",{className:"loading__content-shape shape-1"}),Object(b.jsx)("div",{className:"loading__content-shape shape-2"}),Object(b.jsx)("div",{className:"loading__content-shape shape-3"}),Object(b.jsx)("div",{className:"loading__content-shape shape-4"})]})}):null}),Y=a(566),W=a(567),B=(a(412),function(e){var t=Object(l.useState)(!1),a=Object(s.a)(t,2),n=a[0],i=a[1];Object(l.useEffect)((function(){i((function(t){return t===e.visible?t:e.visible}))}),[e.visible]),Object(l.useEffect)((function(){e.onChange instanceof Function&&e.onChange(n)}),[n]);var c=Object(l.useMemo)((function(){var t=e.expandSize,a=void 0===t?"270px":t,i=e.collapseSize,c=void 0===i?"0px":i;return{left:"calc(100% - ".concat(n?a:c,")"),right:n?a:c}}),[n,e.expandSize,e.collapseSize]),r=e.showHandler,u=void 0===r||r,d=e.zoneClass,j=e.zoneStyle,O=e.zoneLeftClass,m=e.zoneLeftStyle,f=e.zoneRightClass,h=e.zoneRightStyle;return Object(b.jsxs)("div",{className:"collapse-zone ".concat(d),style:j,children:[Object(b.jsx)("div",{className:"collapse-zone__left ".concat(O),style:Object(o.a)(Object(o.a)({},m),{},{width:c.left}),children:e.children}),Object(b.jsxs)("div",{className:"collapse-zone__right ".concat(f),style:Object(o.a)(Object(o.a)({},h),{},{width:c.right}),children:[e.collapse,u?Object(b.jsx)("div",{onClick:function(){return i(!n)},className:"collapse-zone__right-collapse",children:n?Object(b.jsx)(Y.a,{style:{fontSize:24}}):Object(b.jsx)(W.a,{style:{fontSize:24}})}):null]})]})}),U=(a(234),a(307)),H=a(545),G=(a(479),function(e){var t=Object(l.useState)("#ffffff"),a=Object(s.a)(t,2),n=a[0],i=a[1];Object(l.useEffect)((function(){i((function(t){return t!==e.color?e.color:t}))}),[e.color]);var c=Object(l.useRef)(-1);return Object(b.jsx)(U.a,{trigger:"click",content:Object(b.jsx)(H.a,{width:"240px",color:n,onChange:function(t){var a,n=(a=t.rgb,"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", ").concat(a.a,")"));i(n),clearTimeout(c.current),c.current=setTimeout((function(){var t=e.onChange;t instanceof Function&&t(n)}),200)}}),overlayClassName:"color-picker",children:Object(b.jsx)("div",{className:"color-picker__color",style:{backgroundColor:n}})})}),q=a(568),Q=(a(209),a(211)),Z=(a(169),a(170)),K=(a(210),a(212)),J=(a(157),a(158)),X=function(e){var t=e.label,a=e.width,n=void 0===a?60:a;return Object(b.jsx)("div",{style:{width:n},children:t})},$=function(e){var t=Object(l.useState)({backgroundColor:"#ffffff",color:"#ffffff",fontSize:14}),a=Object(s.a)(t,2),n=a[0],i=a[1];Object(l.useEffect)((function(){i((function(t){return Object(o.a)(Object(o.a)({},t),e.zoneStyle)}))}),[e.zoneStyle]);var r=Object(l.useState)({}),d=Object(s.a)(r,2),O=d[0],m=d[1],f=Object(l.useContext)(j),h=function(){f.close()};return Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsx)(J.a,{layout:"inline",children:Object(b.jsxs)(Q.a,{children:[Object(b.jsx)(K.a,{span:24,className:"mg-b12",children:Object(b.jsx)(J.a.Item,{label:Object(b.jsx)(X,{label:"\u80cc\u666f\u989c\u8272"}),children:Object(b.jsx)(G,{color:n.backgroundColor,onChange:function(e){return i(Object(o.a)(Object(o.a)({},n),{},{backgroundColor:e}))}})})}),Object(b.jsx)(K.a,{span:24,className:"mg-b12",children:Object(b.jsx)(J.a.Item,{label:Object(b.jsx)(X,{label:"\u6587\u5b57\u989c\u8272"}),children:Object(b.jsx)(G,{color:n.color,onChange:function(e){return i(Object(o.a)(Object(o.a)({},n),{},{color:e}))}})})}),Object(b.jsx)(K.a,{span:24,className:"mg-b12",children:Object(b.jsx)(J.a.Item,{label:Object(b.jsx)(X,{label:"\u6587\u5b57\u5927\u5c0f"}),required:!0,validateStatus:O.fontSize,children:Object(b.jsx)(Z.a,{min:12,value:n.fontSize,onChange:function(e){return i(Object(o.a)(Object(o.a)({},n),{},{fontSize:e}))}})})})]})}),Object(b.jsxs)("div",{className:"ant-modal-footer",children:[Object(b.jsx)(c.a,{onClick:h,children:"\u53d6\u6d88"}),Object(b.jsx)(c.a,{type:"primary",onClick:function(){(function(){var e=n.fontSize;return O.fontSize=e?void 0:"error",m(Object(o.a)({},O)),!e})()||(e.onChange instanceof Function&&e.onChange(n),h())},children:"\u786e\u5b9a"})]})]})},ee=a(11),te=(a(481),function(e){var t=Object(l.useState)(),a=Object(s.a)(t,2),n=a[0],i=a[1],c=Object(l.useMemo)((function(){var t={};return e.settings.forEach((function(e){t[e]=!0})),t}),[e.settings]);return Object(b.jsxs)("div",{className:"zone",children:[Object(b.jsx)("div",{className:"zone__content",style:n,children:e.children}),Object(b.jsx)("div",{className:"zone__tool",children:c[ee.b["COMMON/ZONE_TOOL_STYLE"]]?Object(b.jsx)(m,{title:"\u533a\u57df\u6837\u5f0f",width:"300px",maskClosable:!1,slot:Object(b.jsx)(q.a,{title:"\u533a\u57df\u6837\u5f0f"}),children:Object(b.jsx)($,{zoneStyle:n,onChange:i})}):null})]})}),ae=a(35),ne=function(e){var t=e.formState;if(t){var a=t.FORM_TYPE,n=t.CODE;switch(a){case ee.b["TABLE/FORM_TYPE_LIST_PAGE"]:return Object(b.jsx)(oe,{formCode:n});case ee.b["TABLE/FORM_TYPE_CUSTOM_PAGE"]:return Object(b.jsx)(ge,{formCode:n});case ee.b["TABLE/FORM_TYPE_EDIT_PAGE"]:return Object(b.jsx)(pe,{formCode:n});default:return null}}return null},ie=function(e){var t=Object(l.useState)(),a=Object(s.a)(t,2),n=a[0],i=a[1];return Object(l.useEffect)((function(){var t=ae.b.userinfo.ORG_ID;ee.a["app/getByRedis"]({Key:e.formCode,orgid:t}).then((function(e){e&&i(e)}))}),[e.formCode]),Object(b.jsx)(ne,{formCode:e.formCode,formState:n})},ce=(a(482),u.a.createContext(void 0)),oe=function(e){var t,a=Object(l.useState)(),n=Object(s.a)(a,2),i=n[0],c=n[1],o=Object(l.useMemo)((function(){return(null===i||void 0===i?void 0:i.Btns)||[]}),[i]),r=Object(l.useRef)();return Object(b.jsx)(ce.Provider,{value:r.current,children:Object(b.jsxs)("div",{className:"list-page",children:[o.length?Object(b.jsx)("div",{className:"list-page__header",children:o.map((function(e){return Object(b.jsx)(ca,{pageType:ee.b["TABLE/FORM_TYPE_LIST_PAGE"],config:e},e.ID)}))}):null,Object(b.jsxs)("div",{className:"list-page__table",children:[Object(b.jsx)(M,{title:(null===i||void 0===i||null===(t=i.Nav_Form)||void 0===t?void 0:t.NAME)||"\u57fa\u7840\u8868\u683c",className:"mg-b18"}),Object(b.jsx)(fa,{onRef:function(e){return r.current=e},formCode:e.formCode,onLoadedData:function(e){c(e.config)}})]})]})})},re=(a(251),a(248)),se=function(e){var t=e.record,a=e.field,n=Object(d.get)(t,a);return Array.isArray(n)&&(n=n.join(";")),n},le=function(e){var t=Object(l.useContext)(ve),a=Object(l.useMemo)((function(){var t=e.config.Nav_Btns,a=void 0===t?[]:t;return a.length?Object(b.jsx)("div",{className:"edit-page__subtable-header",children:a.map((function(e){return Object(b.jsx)(ca,{pageType:ee.b["TABLE/FORM_TYPE_EDIT_PAGE"],config:e},e.ID)}))}):null}),[e.config]),n=Object(l.useMemo)((function(){var t=e.config.Nav_Columns;return(void 0===t?[]:t).map((function(e){var t=e.LABEL,a=e.FIELD_NAME;return{title:t,dataIndex:a,render:function(e,t){return Object(b.jsx)(U.a,{trigger:"click",children:Object(b.jsx)("span",{children:se({record:t,field:a})})})}}}))}),[e.config]),i=Object(l.useMemo)((function(){var a;return Object(d.get)(null===t||void 0===t?void 0:t.formBase,null===(a=e.config)||void 0===a?void 0:a.NavFields)}),[e.config]);return Object(b.jsxs)("div",{className:"edit-page__subtable",children:[a,Object(b.jsx)(re.a,{pagination:!1,columns:n,dataSource:i})]})},ue=function(e){var t=e.configs;return Array.isArray(t)&&t.length?Object(b.jsx)("div",{className:"mg-t12 border-top",children:t.map((function(e,t){return Object(b.jsx)(le,{config:e},"edit-page__subtable-".concat(t))}))}):null};function de(e){var t=e.OrgId,a=e.Parameter1,n=e.Parameter2,i=e.Parameter3,c=e.Parameter4,o=e.Parameter5,r=e.Parameter6,s=e.Keyword,l=void 0===s?"":s,u=e.Sort,d=e.Order,b=void 0===d?0:d,j=e.PageIndex,O=void 0===j?1:j,m=e.Limit,f=void 0===m?10:m,h=e.Start,v=void 0===h?((e.PageIndex||1)-1)*(e.Limit||10):h,x=e.SelectField;return{OrgId:t,Parameter1:a,Parameter2:n,Parameter3:i,Parameter4:c,Parameter5:o,Parameter6:r,Keyword:l,Sort:u,Order:b,PageIndex:O,Limit:f,Start:v,RuleCount:0,IncludeCount:0,OrderCount:0,FilterGroupCount:0,Include:[],Orders:[],FilterGroup:{Rules:[],Groups:[]},SelectField:void 0===x?[]:x,DataRule:[]}}function be(e,t,a,n){return a=null===a?"":a,{Field:e,Operate:t,Value:n?a.toString():a,IsSysParamRule:!!n}}function je(e,t){Array.isArray(null===e||void 0===e?void 0:e.Rules)&&(e.Rules=[].concat(e.Rules,t))}function Oe(e,t){var a=e.isAnd,n=e.rules,i=e.childGroups,c=function(){return{IsAnd:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],Rules:[],Groups:[]}}(a);if(Array.isArray(n)&&n.length){var o=[];n.forEach((function(e){var t=e.field,a=e.operator,n=e.value,i=e.isSysParam;o.push(be(t,a,n,i))})),je(c,o)}return Array.isArray(i)&&i.length&&i.forEach((function(e){Oe(e,t)})),t&&t.Groups.push(c),c}function me(e,t){Array.isArray(null===e||void 0===e?void 0:e.Groups)&&(e.Groups=[].concat(e.Groups,t))}var fe=a(54),he=function(e,t){var a=e.REQUIRED,n=e.FIELD_NAME,i=Object(d.get)(t,n);return a&&Object(fe.d)(i)},ve=(a(487),u.a.createContext(void 0)),xe=function(e){var t=Object(l.useState)({}),a=Object(s.a)(t,2),n=a[0],i=a[1],c=Object(l.useState)({}),o=Object(s.a)(c,2),r=o[0],u=o[1],j=Object(l.useState)([]),O=Object(s.a)(j,2),m=O[0],f=O[1],h=Object(l.useCallback)((function(){var t=e.formState.Nav_PageEdit.Nav_Columns,a={};return(void 0===t?[]:t).forEach((function(e){m.includes(e.FIELD_NAME)||(a[e.FIELD_NAME]=he(e,n))})),u(a),a}),[e.formState,n]),v=Object(l.useContext)(Oa),x=Object(l.useMemo)((function(){return(null===v||void 0===v?void 0:v.selectedData[0])||e.record}),[v,e.record]);Object(l.useEffect)((function(){var t,a,n=e.formState,c=n.Nav_PageEdit,o=n.Nav_SubPageEdits,r=void 0===o?[]:o,s=c.Nav_PageEdit;if((null===x||void 0===x?void 0:x.ID)&&(null===s||void 0===s?void 0:s.QUERY_API_URL)){var l=de({OrgId:ae.b.userinfo.ORG_ID}),u=be("ID",1,x.ID);je(l.FilterGroup,u);var b=function(){var e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){var a=t.NavFields,n=t.Nav_Columns,i=void 0===n?[]:n;a&&e.push(a),i.forEach((function(t){var n=t.FIELD_NAME.split(".");n.length>1&&(n.splice(n.length-1,1),a&&n.splice(0,0,a),e.push(n.join(".")))}))})),e}(r);b.length&&(t=l,a=b,Array.isArray(null===t||void 0===t?void 0:t.Include)&&(t.Include=Object(d.uniq)([].concat(t.Include,a)))),ee.a["app/getDataByPost"](l,{url:s.QUERY_API_URL}).then((function(e){e&&i(e)}))}}),[x,e.formState]);var p=Object(l.useMemo)((function(){var t=e.formState.Nav_PageEdit.Nav_Btns,a=void 0===t?[]:t;return a.length?Object(b.jsx)("div",{className:"edit-page__header",children:a.map((function(e){return Object(b.jsx)(ca,{pageType:ee.b["TABLE/FORM_TYPE_EDIT_PAGE"],config:e},e.ID)}))}):null}),[e.formState]),g=Object(l.useMemo)((function(){var t=e.formState.Nav_Form.JS_FILES;return ee.b["DYNAMICJS/".concat(t)]||{}}),[e.formState]),I=Object(l.useMemo)((function(){var t=e.formState.Nav_PageEdit.Nav_Columns;return(void 0===t?[]:t).map((function(e){return Object(b.jsx)(K.a,{span:6,children:Object(b.jsx)(ua,{config:e})},e.ID)}))}),[e.formState]),_=Object(l.useMemo)((function(){return{formBase:n,setFormBase:i,verify:r,verifyFormBase:h,verifyWhiteList:m,setVerifyWhiteList:f,formState:e.formState,dynamicJs:g}}),[e.formState,n,r,m]),N=e.formState.Nav_SubPageEdits,C=void 0===N?[]:N;return Object(b.jsx)(ve.Provider,{value:_,children:Object(b.jsxs)("div",{className:"edit-page",children:[p,Object(b.jsx)(J.a,{layout:"horizontal",labelCol:{span:8},wrapperCol:{span:16},children:Object(b.jsx)(Q.a,{gutter:16,children:I})}),Object(b.jsx)(ue,{configs:C})]})})},pe=function(e){var t=Object(l.useState)(),a=Object(s.a)(t,2),n=a[0],i=a[1];return Object(l.useEffect)((function(){var t=de({OrgId:ae.b.userinfo.ORG_ID,Keyword:e.formCode});ee.a["edit/getEditPageConfigInfo"](t).then((function(e){e&&i(e)}))}),[e.formCode]),n?Object(b.jsx)(xe,{formCode:e.formCode,formState:n,record:e.record}):null},ge=function(e){var t=Object(l.useState)(),a=Object(s.a)(t,2),n=a[0],i=a[1];if(Object(l.useEffect)((function(){var t=de({OrgId:ae.b.userinfo.ORG_ID,Keyword:e.formCode});ee.a["app/getCustomPageConfigInfo"](t).then((function(e){e&&i(e)}))}),[e.formCode]),!n)return null;var c=n.Nav_PageCustom,o=void 0===c?{}:c;return Object(b.jsx)(Qt,{name:o.COMPONENT_NAME})},Ie=(a(193),a(41)),_e=a(82),Ne=(a(213),a(215)),Ce=a(151),ye=a(550),Ae=a(253),Ee=(a(185),a(184)),Te=(a(330),a(317)),Me=(a(163),a(164)),Se=(a(116),a(43)),Pe=a(73),De=a.n(Pe),we="CFG/ControllerMonitor/ImportTargetDeviation",Le=function(e){var t,a=Object(l.useState)({Value:"",File:"",IsSaveController:!1}),n=Object(s.a)(a,2),i=n[0],r=n[1],O=Object(l.useState)({}),m=Object(s.a)(O,2),f=m[0],h=m[1],v=Object(l.useContext)(j),x=function(){v.close()};return Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20},children:[Object(b.jsx)(J.a.Item,{label:"\u9884\u8bbe\u503c",validateStatus:f.required,children:Object(b.jsx)(Me.a,{disabled:i.File,value:i.Value,onChange:function(e){return r(Object(o.a)(Object(o.a)({},i),{},{Value:e.target.value}))},addonAfter:"\u5355\u4f4d"})}),Object(b.jsx)(J.a.Item,{label:"\u5bfc\u5165",validateStatus:f.required,children:Object(b.jsxs)("div",{className:"display-flex",children:[Object(b.jsx)(Me.a,{readOnly:!0,disabled:i.Value,value:null===(t=i.File)||void 0===t?void 0:t.name,className:"flex-1"}),Object(b.jsx)(Te.a,{showUploadList:!1,maxCount:1,beforeUpload:function(e){return r(Object(o.a)(Object(o.a)({},i),{},{File:e})),!1},disabled:i.Value,children:Object(b.jsx)(c.a,{type:"primary",disabled:i.Value,style:{marginLeft:8},children:"\u9009\u62e9"})}),i.File?Object(b.jsx)(c.a,{type:"primary",onClick:function(){return r(Object(o.a)(Object(o.a)({},i),{},{File:""}))},className:"mg-l4",children:"\u91cd\u7f6e"}):null]})}),Object(b.jsxs)(J.a.Item,{label:" ",colon:!1,children:[Object(b.jsx)(Ee.a,{checked:i.IsSaveController,onChange:function(e){return r(Object(o.a)(Object(o.a)({},i),{},{IsSaveController:e.target.checked}))}}),Object(b.jsx)("span",{className:"pd-l8",children:"\u5b58\u5165\u5f53\u524d\u63a7\u5236\u5668"})]})]}),Object(b.jsxs)("div",{className:"ant-modal-footer",children:[Object(b.jsx)(c.a,{onClick:x,children:"\u53d6\u6d88"}),Object(b.jsx)(c.a,{type:"primary",onClick:function(){if(i.Value||i.File?f.required=void 0:f.required="error",h(Object(o.a)({},f)),i.Value||i.File){if(i.File){var t=new FormData;return t.append("File",i.File),t.append("IsSaveController",i.IsSaveController),t.append("ControllerId",e.controlId),t.append("MesuringObjectId",e.mesuringObjectId),void De()({url:"".concat(Object(fe.a)(we),"/").concat(we),method:"POST",data:t}).then((function(t){t&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),e.onSuccess(),x())}))}ee.a["controlmonitor/setTargetDeviation"](Object(o.a)({ControllerId:e.controlId,MesuringObjectId:e.mesuringObjectId},Object(d.pick)(i,["Value","IsSaveController"]))).then((function(t){t&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),e.onSuccess(),x())}))}},children:"\u786e\u5b9a"})]})]})},Re="CFG/ControllerMonitor/ImportSPValue",Ve=function(e){var t,a=Object(l.useState)({SPValue:"",file:""}),n=Object(s.a)(a,2),i=n[0],r=n[1],d=Object(l.useState)({}),O=Object(s.a)(d,2),m=O[0],f=O[1],h=Object(l.useContext)(j),v=function(){h.close()};return Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20},children:[Object(b.jsx)(J.a.Item,{label:"\u9884\u8bbe\u503c",validateStatus:m.required,children:Object(b.jsx)(Me.a,{disabled:i.file,value:i.SPValue,onChange:function(e){return r(Object(o.a)(Object(o.a)({},i),{},{SPValue:e.target.value}))},addonAfter:"\u5355\u4f4d"})}),Object(b.jsx)(J.a.Item,{label:"\u5bfc\u5165",validateStatus:m.required,children:Object(b.jsxs)("div",{className:"display-flex",children:[Object(b.jsx)(Me.a,{readOnly:!0,allowClear:!0,disabled:i.SPValue,value:null===(t=i.file)||void 0===t?void 0:t.name,className:"flex-1"}),Object(b.jsx)(Te.a,{showUploadList:!1,maxCount:1,beforeUpload:function(e){return r(Object(o.a)(Object(o.a)({},i),{},{file:e})),!1},disabled:i.SPValue,children:Object(b.jsx)(c.a,{type:"primary",disabled:i.SPValue,style:{marginLeft:8},children:"\u9009\u62e9"})}),i.file?Object(b.jsx)(c.a,{type:"primary",onClick:function(){return r(Object(o.a)(Object(o.a)({},i),{},{file:""}))},className:"mg-l4",children:"\u91cd\u7f6e"}):null]})})]}),Object(b.jsxs)("div",{className:"ant-modal-footer",children:[Object(b.jsx)(c.a,{onClick:v,children:"\u53d6\u6d88"}),Object(b.jsx)(c.a,{type:"primary",onClick:function(){if(i.SPValue||i.file?m.required=void 0:m.required="error",f(Object(o.a)({},m)),i.SPValue||i.file){if(i.file){var t=new FormData;return t.append("file",i.file),t.append("ControllerId",e.controlId),t.append("ActuatorId",e.actuatorId),void De()({url:"".concat(Object(fe.a)(Re),"/").concat(Re),method:"POST",data:t}).then((function(t){t&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),e.onSuccess(),v())}))}ee.a["controlmonitor/setSPValue"]({ControllerId:e.controlId,ActuatorId:e.actuatorId,SPValue:i.SPValue}).then((function(t){t&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),e.onSuccess(),v())}))}},children:"\u786e\u5b9a"})]})]})},ze=(a(242),a(257)),ke=a(107),Fe=Ne.a.TabPane,Ye=[{label:"\u79d2",value:"seconds"},{label:"\u5206",value:"minutes"},{label:"\u65f6",value:"hours"}],We=function(e){var t,a,n,i,r=Object(l.useState)(!1),u=Object(s.a)(r,2),O=u[0],m=u[1],f=Object(l.useState)([]),h=Object(s.a)(f,2),v=h[0],x=h[1];Object(l.useEffect)((function(){ee.a["controlmonitor/getOtherControllerGroups"]().then((function(e){e&&(x(e),_(e[0].Id))}))}),[]);var p=Object(l.useState)(""),g=Object(s.a)(p,2),I=g[0],_=g[1],N=Object(l.useState)(60),C=Object(s.a)(N,2),y=C[0],A=C[1],E=Object(l.useState)("seconds"),M=Object(s.a)(E,2),S=M[0],P=M[1],D=Object(l.useState)({AutoInitVarId:"",DCSVarId:"",DebugVarId:""}),w=Object(s.a)(D,2),R=w[0],V=w[1];Object(l.useEffect)((function(){V(Object(d.pick)(e.controlDetail,["AutoInitVarId","DebugVarId","DCSVarId"]))}),[e.controlDetail]);var z=Object(l.useState)({}),F=Object(s.a)(z,2),Y=F[0],W=F[1],B=function(e,t){var a=e.current,n=e.search,i=e.initSearch,c=de({OrgId:ae.b.userinfo.ORG_ID,PageIndex:a}),o=[be("NAME",9,n)];return!n&&i&&o.push(be("ID",1,i)),je(c.FilterGroup,o),ee.a["app/orderPagedTwo"](c)},U=function(e,t){"autoSource"===t&&V(Object(o.a)(Object(o.a)({},R),{},{AutoInitVarId:e})),"dcsSource"===t&&V(Object(o.a)(Object(o.a)({},R),{},{DCSVarId:e})),"debugSource"===t&&V(Object(o.a)(Object(o.a)({},R),{},{DebugVarId:e}))},H=Object(l.useContext)(j),G=function(){H.close()};return Object(b.jsxs)(Ne.a,{children:[Object(b.jsxs)(Fe,{tab:"\u7ec4\u5207\u6362",children:[Object(b.jsx)(T,{extraFont:"\u7ec4\u5207\u6362\u5012\u8ba1\u65f6\uff1a",seconds:e.counter||0,className:"display-block mg-b12"}),Object(b.jsxs)(J.a,{layout:"horizontal",children:[Object(b.jsx)(J.a.Item,{label:"\u5f53\u524d\u7ec4\u5207\u6362\u7b56\u7565",children:Object(b.jsx)("span",{style:{color:(null===(t=e.group)||void 0===t?void 0:t.IsAutoChangeGroup)?"#73d13d":"#bfbfbf"},children:(null===(a=e.group)||void 0===a?void 0:a.IsAutoChangeGroup)?"\u5df2\u5f00\u542f\u81ea\u52a8\u7ec4\u5207\u6362":"\u672a\u5f00\u542f\u81ea\u52a8\u7ec4\u5207\u6362"})}),Object(b.jsxs)(J.a.Item,{label:"\u624b\u52a8\u7ec4\u5207\u6362",children:[Object(b.jsx)(ze.a,{checked:O,onChange:m}),(null===(n=e.group)||void 0===n?void 0:n.IsAutoChangeGroup)&&O?Object(b.jsxs)("span",{style:{color:"#ff7875"},className:"vertical-middle pd-l16",children:[Object(b.jsx)(ke.a,{className:"mg-r4"}),Object(b.jsx)("span",{children:"\u624b\u52a8\u7ec4\u5207\u6362\u5f00\u542f\u540e\uff0c\u5c06\u5173\u95ed\u81ea\u52a8\u7ec4\u5207\u6362"})]}):null]})]}),O?Object(b.jsx)(J.a,{layout:"vertical",className:"mg-t8",children:Object(b.jsxs)(Q.a,{gutter:8,children:[Object(b.jsx)(K.a,{span:8,children:Object(b.jsx)(J.a.Item,{label:"\u5f53\u524d\u7ec4",children:Object(b.jsx)(Me.a,{disabled:!0,value:null===(i=e.group)||void 0===i?void 0:i.GroupName})})}),Object(b.jsx)(K.a,{span:8,children:Object(b.jsx)(J.a.Item,{label:"\u76ee\u6807\u7ec4",children:Object(b.jsx)(L.a,{fieldNames:{label:"Name",value:"Id"},options:v,value:I,onChange:_})})}),Object(b.jsx)(K.a,{span:8,children:Object(b.jsx)(J.a.Item,{label:"\u5207\u6362\u65f6\u95f4",validateStatus:y?void 0:"error",children:Object(b.jsxs)(Q.a,{gutter:8,children:[Object(b.jsx)(K.a,{span:16,children:Object(b.jsx)(Z.a,{min:1,value:y,onChange:A,style:{width:"100%"}})}),Object(b.jsx)(K.a,{span:8,children:Object(b.jsx)(L.a,{options:Ye,value:S,onChange:P})})]})})})]})}):null,O?Object(b.jsxs)("div",{className:"ant-modal-footer mg-t8",children:[Object(b.jsx)(c.a,{onClick:G,children:"\u53d6\u6d88"}),Object(b.jsx)(c.a,{type:"primary",onClick:function(){if(y){var t=y;switch(S){case"minutes":t=60*y;break;case"hours":t=60*y*60}e.onGroupSwitch({leftTime:t,targetGroup:I,targetTimes:y,timeType:S}),G()}},children:"\u786e\u5b9a"})]}):null]},"group-switch"),Object(b.jsxs)(Fe,{tab:"\u529f\u80fd\u914d\u7f6e",children:[Object(b.jsx)(J.a,{layout:"vertical",children:Object(b.jsxs)(Q.a,{gutter:8,children:[Object(b.jsx)(K.a,{span:12,children:Object(b.jsx)(J.a.Item,{required:!0,validateStatus:Y.AutoInitVarId,label:"\u81ea\u52a8\u521d\u59cb\u5316\u70b9",children:Object(b.jsx)(k,{value:R.AutoInitVarId,remoteMethod:function(e){return B(e)},onChange:function(e){return U(e,"autoSource")},selectProps:{allowClear:!0}})})}),Object(b.jsx)(K.a,{span:12,children:Object(b.jsx)(J.a.Item,{required:!0,validateStatus:Y.DCSVarId,label:"DCS\u63a7\u5236\u70b9",children:Object(b.jsx)(k,{value:R.DCSVarId,remoteMethod:function(e){return B(e)},onChange:function(e){return U(e,"dcsSource")},selectProps:{allowClear:!0}})})}),Object(b.jsx)(K.a,{span:12,children:Object(b.jsx)(J.a.Item,{required:!0,validateStatus:Y.DebugVarId,label:"\u8c03\u8bd5",children:Object(b.jsx)(k,{value:R.DebugVarId,remoteMethod:function(e){return B(e)},onChange:function(e){return U(e,"debugSource")},selectProps:{allowClear:!0}})})})]})}),Object(b.jsxs)("div",{className:"ant-modal-footer",children:[Object(b.jsx)(c.a,{onClick:G,children:"\u53d6\u6d88"}),Object(b.jsx)(c.a,{type:"primary",onClick:function(){(function(){var e=R.AutoInitVarId,t=R.DCSVarId,a=R.DebugVarId;return Y.AutoInitVarId=e?void 0:"error",Y.DCSVarId=t?void 0:"error",Y.DebugVarId=a?void 0:"error",W(Object(o.a)({},Y)),!e||!a||!t})()||ee.a["controlmonitor/updateContorlSet"](Object(o.a)({ControllerId:e.controlDetail.Id},R)).then((function(t){t&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),e.onSuccess(),G())}))},children:"\u786e\u5b9a"})]})]},"func-config")]})},Be=a(3),Ue=a(569),He=(Ne.a.TabPane,a(243),a(250)),Ge=a(247),qe=["133, 84, 158","0, 183, 238","50, 177, 108","250, 140, 22","255, 77, 79","255, 236, 61","8, 151, 156","158, 16, 104","255, 251, 230","120, 6, 80"],Qe=function(e){var t=Object(l.useState)(),a=Object(s.a)(t,2),n=a[0],i=a[1];return Object(l.useEffect)((function(){var t=setTimeout((function(){var t,a,n,c,r,s,l=e.chartData,u=e.alignChartData,b=void 0===u?{}:u,j=e.chartOption,O=e.seriesData,m=e.position,f=l.PositionNumbers,h=void 0===f?[]:f,v=l.Name,x=l.Unit,p=void 0===x?"gsm":x,g=l.CoordinateMax,I=void 0===g?0:g,_=l.CoordinateMin,N=void 0===_?0:_,C=b.PositionNumbers,y=void 0===C?[]:C,A=y.length,E={name:"markLines",type:"line",markLine:{symbol:"none",silent:!0,animation:!1,label:{position:"insideEndTop",formatter:"{b}: {c}"},lineStyle:{type:"solid",color:"#bcbcbc"},data:[]}};void 0!==m&&E.markLine.data.push({name:"\u4f4d\u53f7",xAxis:m,label:{formatter:""}}),I&&E.markLine.data.push({name:"\u4e0a\u754c",yAxis:I}),N&&E.markLine.data.push({name:"\u4e0b\u754c",yAxis:N});var T=Object(d.cloneDeep)(O),M=A?y:h;M.forEach((function(e,t){var a=A?h.find((function(t){return t.AlignPositionNumber===e.PositionNumber}))||{}:e;T.forEach((function(n){!n.data&&(n.data=[]),void 0!==a[n.field]?n.checkLoop&&void 0!==a.IsCloseLoop?n.data[t]={value:[e.PositionNumber,a[n.field]],itemStyle:{color:a.IsCloseLoop?"#ffc355":"#5bb86d"}}:n.data[t]={value:[e.PositionNumber,a[n.field]]}:n.notFillEmpty||n.data[t]||(n.data[t]={value:[e.PositionNumber,n.zeroToUndefined?void 0:0]})}))}));var S=T.filter((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.length})),P=null===(t=M[0])||void 0===t?void 0:t.PositionNumber,D=null===(a=M[M.length-1])||void 0===a?void 0:a.PositionNumber,w=[];S.forEach((function(e){return w.push.apply(w,Object(_e.a)(e.data.map((function(e){return e.value[1]}))))}));var L=Math.ceil(1.15*Math.max.apply(Math,[I].concat(Object(_e.a)(w.filter((function(e){return void 0!==e})))))),R=(null===j||void 0===j||null===(n=j.xAxis)||void 0===n?void 0:n.maxInterval)||10;i(Object(o.a)(Object(o.a)({},j),{},{title:Object(o.a)(Object(o.a)({top:0,left:60,text:p},null===j||void 0===j?void 0:j.title),{},{textStyle:Object(o.a)({fontSize:12,fontWeight:"normal",color:"#aaa"},null===j||void 0===j||null===(c=j.title)||void 0===c?void 0:c.textStyle)}),legend:Object(o.a)(Object(o.a)({top:0},null===j||void 0===j?void 0:j.legend),{},{data:S.map((function(e){var t=e.chartOption,a=void 0===t?{}:t,n=a.legend,i=void 0===n?{}:n,c=a.lineOption,r=void 0===c?{}:c,s=a.barOption,l=void 0===s?{}:s,u=r.name,d=l.name,b=i.data,j=void 0===b?[]:b;return Object(o.a)({name:u||d},j[0])}))}),grid:Object(o.a)({top:20,right:30,bottom:20,left:60,containLabel:!1},null===j||void 0===j?void 0:j.grid),tooltip:Object(o.a)(Object(o.a)({trigger:A?"item":"axis",borderColor:"rgba(0,0,0,0)"},null===j||void 0===j?void 0:j.tooltip),{},{formatter:A?function(e){var t=e.seriesName,a=e.marker,n=e.value,i=h.find((function(e){return e.AlignPositionNumber===n[0]}));return"\n              <div>\n                <p>".concat(i?i.PositionNumber:"","</p>\n                <span>").concat(a).concat(t," ").concat(n[1],"</span>\n              </div>\n            ")}:""}),xAxis:Object(o.a)(Object(o.a)({min:P||null,max:D||null},null===j||void 0===j?void 0:j.xAxis),{},{maxInterval:A?1:R,type:"value",axisLine:{lineStyle:{color:"#BFBFBF"}},axisTick:Object(o.a)({alignWithLabel:!0},null===j||void 0===j||null===(r=j.xAxis)||void 0===r?void 0:r.axisTick),axisLabel:Object(o.a)(Object(o.a)({color:"#BFBFBF",fontSize:11},null===j||void 0===j||null===(s=j.xAxis)||void 0===s?void 0:s.axisLabel),{},{formatter:A?function(e){var t=h.findIndex((function(t){return t.AlignPositionNumber===e})),a=h[t];return t%R===0||0===t||t===h.length-1?null===a||void 0===a?void 0:a.PositionNumber:void 0}:"{value}"}),splitLine:{show:!1}}),yAxis:Object(o.a)(Object(o.a)({type:"value",name:v,nameLocation:"center",nameGap:40,min:null,max:L,offset:13},null===j||void 0===j?void 0:j.yAxis),{},{nameTextStyle:{color:"#000000"},splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"#BFBFBF"}},axisTick:{show:!0,lineStyle:{color:"#C5C5C5"}},axisLabel:{color:"#7B7B7B",fontSize:11}}),series:[E].concat(S.map((function(e,t){return function(e,t){var a=e.data,n=e.chartOption,i=void 0===n?{}:n,c=i.lineOption,r=i.barOption,s=qe[t%qe.length];return c?Object(o.a)(Object(o.a)({symbol:"none"},c),{},{type:"line",lineStyle:Object(o.a)({color:"rgba(".concat(s,", 1)")},null===c||void 0===c?void 0:c.lineStyle),itemStyle:Object(o.a)({color:"rgba(".concat(s,", 1)")},null===c||void 0===c?void 0:c.itemStyle),areaStyle:Object(o.a)({color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(".concat(s,", 0.6)")},{offset:1,color:"rgba(".concat(s,", 0.05)")}]}},null===c||void 0===c?void 0:c.areaStyle),data:a}):r?Object(o.a)(Object(o.a)({barWidth:13},r),{},{type:"bar",itemStyle:Object(o.a)({color:"rgba(".concat(s,", 1)")},null===r||void 0===r?void 0:r.itemStyle),data:a}):{data:a}}(e,t)})))}))}),300);return function(){return clearTimeout(t)}}),[e.chartData,e.alignChartData,e.chartOption,e.position]),n?Object(b.jsx)(Ge.a,{lazyUpdate:!0,option:n,style:{height:"100%"}}):null},Ze=(a(244),function(e){var t=Object(l.useMemo)((function(){var t=(e.alignChartData||{}).PositionNumbers;return!!(void 0===t?[]:t).length}),[e.alignChartData]),a=Object(l.useMemo)((function(){var a=e.chartData.PositionNumbers;return(void 0===a?[]:a).map((function(e){return e[t?"AlignPositionNumber":"PositionNumber"]}))}),[e.chartData,t]),n=Object(l.useMemo)((function(){var a,n,i=e.chartData,c=e.alignChartData,o=void 0===c?{}:c,r=i.PositionNumbers,s=void 0===r?[]:r,l=o.PositionNumbers,u=t?void 0===l?[]:l:s;return{min:(null===(a=u[0])||void 0===a?void 0:a.PositionNumber)||1,max:(null===(n=u[u.length-1])||void 0===n?void 0:n.PositionNumber)||100}}),[e.chartData,t]),i=Object(l.useState)(0),c=Object(s.a)(i,2),r=c[0],u=c[1],j=function(a){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return a;var i=e.chartData,c=i.PositionNumbers,o=void 0===c?[]:c;if(n){var r=o.find((function(e){return e.PositionNumber===a}));return null===r||void 0===r?void 0:r.AlignPositionNumber}var s=o.find((function(e){return e.AlignPositionNumber===a}));return null===s||void 0===s?void 0:s.PositionNumber},O=function(t){if(!a.includes(t)){var n=Object(d.cloneDeep)(a);n.push(t),n.sort((function(e,t){return e-t}));var i=n.indexOf(t);if(0===i||i===n.length-1)t=0===i?a[0]:a[a.length-1];else t=n[i]-n[i-1]>n[i+1]-n[i]?n[i+1]:n[i-1]}u(t),e.onChange instanceof Function&&e.onChange(j(t))},m=A(a);Object(l.useEffect)((function(){var t=e.sliderVisible,n=void 0===t||t;!Object(d.isEqual)(m,a)&&n&&O(a[Math.floor((a.length-1)/2)])}),[a]),Object(l.useEffect)((function(){u(j(e.slider,!0))}),[e.slider]);var f=Object(l.useRef)(!1);Object(l.useEffect)((function(){var n=setTimeout((function(){if(void 0===r&&t&&!f.current){f.current=!0;var n=a[Math.floor((a.length-1)/2)];e.onAlignChange instanceof Function&&e.onAlignChange(n)}}),200);return function(){return clearTimeout(n)}}),[r,t,a]);var h=Object(l.useMemo)((function(){var t=e.chartData.PositionNumbers;return(void 0===t?[]:t).find((function(e){return e.PositionNumber===j(r)}))}),[r,e.chartData]);Object(l.useEffect)((function(){e.onChartChange instanceof Function&&e.onChartChange(h)}),[h]);var v=Object(l.useState)([]),x=Object(s.a)(v,2),p=x[0],g=x[1];Object(l.useEffect)((function(){e.onCheckedChange instanceof Function&&e.onCheckedChange(p)}),[p]);var I=A(e.chartData);Object(l.useEffect)((function(){!Object(d.isEqual)(I,e.chartData)&&g([])}),[e.chartData]);var _=Object(l.useRef)(null),N=E(_),C=Object(l.useMemo)((function(){return N.clientWidth-90}),[N]),y=e.sliderStyle,T=e.sliderVisible,M=void 0===T||T,S=e.timeVisible,P=e.checkboxVisible,D=void 0!==P&&P,w=e.chartData,L=e.alignChartData,R=void 0===L?{}:L,V=e.chartHeight,z=e.chartOption,k=e.seriesData,F=w.PositionNumbers,Y=void 0===F?[]:F,W=R.PositionNumbers,B=t?void 0===W?[]:W:Y,U=C/(B.length-1);return Object(b.jsxs)("div",{className:"chart-show",children:[M?Object(b.jsx)("div",{ref:_,className:"chart-show__slider",style:y,children:Object(b.jsx)(He.a,Object(o.a)(Object(o.a)({},n),{},{value:r,tipFormatter:function(e){return j(e)},onChange:O}))}):null,Object(b.jsxs)("div",{className:"chart-show__chart",style:{height:V||360},children:[S?Object(b.jsxs)("div",{className:"chart-show__chart-time",children:[w.CurrentDataTime?Object(b.jsxs)("span",{children:["\u5f53\u524d\u65f6\u95f4\uff1a",w.CurrentDataTime]}):null,w.LastSnapTime?Object(b.jsxs)("span",{children:["\u5feb\u7167\u65f6\u95f4\uff1a",w.LastSnapTime]}):null]}):null,Object(b.jsx)(Qe,{chartData:w,alignChartData:R,chartOption:z,seriesData:k,position:r})]}),D?Object(b.jsxs)("div",{className:"chart-show__checkbox",children:[B.length?Object(b.jsx)(Ee.a,{indeterminate:!!p.length&&p.length!==w.PositionNumbers.length,onChange:function(t){return function(t){var a=e.chartData;g(t?a.PositionNumbers.map((function(e){return e.PositionNumber})):[])}(t.target.checked)},className:"chart-show__checkbox-all"}):null,B.map((function(e,a){var n=e.PositionNumber;if(t){var i=Y.find((function(e){return e.AlignPositionNumber===n}));n=null===i||void 0===i?void 0:i.PositionNumber}return n?Object(b.jsx)("div",{className:"chart-show__checkbox-point",style:{left:"".concat(U*a+60,"px")},children:Object(b.jsx)(Ee.a,{checked:-1!==p.indexOf(n),onChange:function(e){return t=n,a=e.target.checked,void g(a?p.concat(t):p.filter((function(e){return e!==t})));var t,a}})},"".concat(n,"_").concat(a)):Object(b.jsx)("div",{className:"chart-show__checkbox-point opacity-0"},"".concat(n,"_").concat(a))}))]}):null]})}),Ke=["133, 84, 158","0, 183, 238","50, 177, 108","250, 140, 22","255, 77, 79","255, 236, 61","8, 151, 156","158, 16, 104","255, 251, 230","120, 6, 80"],Je=function(e){var t=Object(l.useState)(),a=Object(s.a)(t,2),n=a[0],i=a[1];return Object(l.useEffect)((function(){var t=setTimeout((function(){var t,a,n,c,r=e.chartData,s=e.chartOption,l=e.seriesData,u=e.position,b=r.Data,j=void 0===b?[]:b,O=r.Name,m=r.Unit,f=void 0===m?"gsm":m,h=r.CoordinateMax,v=void 0===h?0:h,x=r.CoordinateMin,p=void 0===x?0:x,g=Object(d.cloneDeep)(j);g.forEach((function(e,t){e.PositionNumber=t+1}));var I={name:"markLines",type:"line",markLine:{symbol:"none",silent:!0,animation:!1,label:{position:"insideEndTop",formatter:"{b}: {c}"},lineStyle:{type:"solid",color:"#bcbcbc"},data:[]}};void 0!==u&&I.markLine.data.push({name:"\u4f4d\u53f7",xAxis:u,label:{formatter:""}}),v&&I.markLine.data.push({name:"\u4e0a\u754c",yAxis:v}),p&&I.markLine.data.push({name:"\u4e0b\u754c",yAxis:p});var _=Object(d.cloneDeep)(l);g.forEach((function(e,t){_.forEach((function(a){void 0!==e[a.field]&&(!a.data&&(a.data=[]),a.checkLoop&&void 0!==e.IsCloseLoop?a.data[t]={value:[e.PositionNumber,e[a.field]],itemStyle:{color:e.IsCloseLoop?"#ffc355":"#5bb86d"}}:a.data[t]={value:[e.PositionNumber,e[a.field]]})}))}));var N=_.filter((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.length})),C=null===(t=g[0])||void 0===t?void 0:t.PositionNumber,y=null===(a=g[g.length-1])||void 0===a?void 0:a.PositionNumber,A=[];N.forEach((function(e){return A.push.apply(A,Object(_e.a)(e.data.map((function(e){return e.value[1]}))))}));var E=Math.ceil(1.15*Math.max.apply(Math,[v].concat(Object(_e.a)(A.filter((function(e){return void 0!==e}))))));i({title:Object(o.a)(Object(o.a)({top:0,left:60,text:f},null===s||void 0===s?void 0:s.title),{},{textStyle:Object(o.a)({fontSize:12,fontWeight:"normal",color:"#aaa"},null===s||void 0===s||null===(n=s.title)||void 0===n?void 0:n.textStyle)}),legend:Object(o.a)(Object(o.a)({top:0},null===s||void 0===s?void 0:s.legend),{},{data:N.map((function(e){var t=e.chartOption,a=void 0===t?{}:t,n=a.legend,i=void 0===n?{}:n,c=a.lineOption,r=void 0===c?{}:c,s=a.barOption,l=void 0===s?{}:s,u=r.name,d=l.name,b=i.data,j=void 0===b?[]:b;return Object(o.a)({name:u||d},j[0])}))}),grid:Object(o.a)({top:20,right:30,bottom:20,left:60,containLabel:!1},null===s||void 0===s?void 0:s.grid),tooltip:Object(o.a)(Object(o.a)({trigger:"axis",borderColor:"rgba(0,0,0,0)"},null===s||void 0===s?void 0:s.tooltip),{},{formatter:function(e){var t=e[0],a=t.seriesName,n=t.marker,i=t.value,c=g.find((function(e){return e.PositionNumber===i[0]}));return"\n            <div>\n              <p>".concat((null===c||void 0===c?void 0:c.Time)||"","</p>\n              <span>").concat(n).concat(a," ").concat(i[1],"</span>\n            </div>\n          ")}}),xAxis:Object(o.a)(Object(o.a)({min:C||null,max:y||null,maxInterval:50},null===s||void 0===s?void 0:s.xAxis),{},{type:"value",axisLine:{lineStyle:{color:"#BFBFBF"}},axisTick:Object(o.a)({alignWithLabel:!0},null===s||void 0===s||null===(c=s.xAxis)||void 0===c?void 0:c.axisTick),axisLabel:{color:"#BFBFBF",fontSize:11,formatter:function(e){var t=g.find((function(t){return t.PositionNumber===e}));return null===t||void 0===t?void 0:t.Time}},splitLine:{show:!1}}),yAxis:Object(o.a)(Object(o.a)({type:"value",name:O,nameLocation:"center",nameGap:40,min:null,max:E,offset:13},null===s||void 0===s?void 0:s.yAxis),{},{nameTextStyle:{color:"#000000"},splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"#BFBFBF"}},axisTick:{show:!0,lineStyle:{color:"#C5C5C5"}},axisLabel:{color:"#7B7B7B",fontSize:11}}),series:[I].concat(N.map((function(e,t){return function(e,t){var a=e.data,n=e.chartOption,i=void 0===n?{}:n,c=i.lineOption,r=i.barOption,s=Ke[t%Ke.length];return c?Object(o.a)(Object(o.a)({symbol:"none"},c),{},{type:"line",lineStyle:Object(o.a)({color:"rgba(".concat(s,", 1)")},null===c||void 0===c?void 0:c.lineStyle),itemStyle:Object(o.a)({color:"rgba(".concat(s,", 1)")},null===c||void 0===c?void 0:c.itemStyle),areaStyle:Object(o.a)({color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(".concat(s,", 0.6)")},{offset:1,color:"rgba(".concat(s,", 0.05)")}]}},null===c||void 0===c?void 0:c.areaStyle),data:a}):r?Object(o.a)(Object(o.a)({barWidth:13},r),{},{type:"bar",itemStyle:Object(o.a)({color:"rgba(".concat(s,", 1)")},null===r||void 0===r?void 0:r.itemStyle),data:a}):{data:a}}(e,t)})))})}),300);return function(){return clearTimeout(t)}}),[e.chartData,e.chartOption,e.position]),n?Object(b.jsx)(Ge.a,{lazyUpdate:!0,option:n,style:{height:"100%"}}):null},Xe=function(e){var t=Object(l.useMemo)((function(){var t=e.chartData.Data;return(void 0===t?[]:t).map((function(e){return e.Time}))}),[e.chartData]),a=Object(l.useMemo)((function(){return{min:1,max:t.length}}),[t]),n=Object(l.useState)(0),i=Object(s.a)(n,2),c=i[0],r=i[1],u=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a?t.indexOf(e)+1:t[e-1]},d=function(t){r(t),e.onChange instanceof Function&&e.onChange(u(t))};Object(l.useEffect)((function(){var a=e.sliderVisible;(void 0===a||a)&&d(Math.ceil(t.length/2))}),[e.sliderVisible,t]),Object(l.useEffect)((function(){r(u(e.slider||0,!0))}),[e.slider]);var j=Object(l.useMemo)((function(){var t=e.chartData.Data;return(void 0===t?[]:t).find((function(e){return e.Time===u(c)}))}),[c,e.chartData]);Object(l.useEffect)((function(){e.onChartChange instanceof Function&&e.onChartChange(j)}),[j]);var O=e.sliderPosition,m=void 0===O?"top":O,f=e.sliderStyle,h=e.sliderVisible,v=void 0===h||h,x=e.chartData,p=e.chartHeight,g=e.chartOption,I=e.seriesData;return Object(b.jsxs)("div",{className:"chart-show",children:[v&&"top"===m?Object(b.jsx)("div",{className:"chart-show__slider",style:f,children:Object(b.jsx)(He.a,Object(o.a)(Object(o.a)({},a),{},{value:c,tipFormatter:function(e){return u(e)},onChange:d}))}):null,Object(b.jsx)("div",{className:"chart-show__chart",style:{height:p||360},children:Object(b.jsx)(Je,{chartData:x,chartOption:g,seriesData:I,position:c})}),v&&"bottom"===m?Object(b.jsx)("div",{className:"chart-show__slider",style:f,children:Object(b.jsx)(He.a,Object(o.a)(Object(o.a)({},a),{},{value:c,tipFormatter:function(e){return u(e)},onChange:d}))}):null]})},$e=a(7),et=function(e){var t=Object(l.useState)(),a=Object(s.a)(t,2),n=a[0],i=a[1];return Object(l.useEffect)((function(){var t=setTimeout((function(){var t,a,n=e.chartData,c=e.chartOption,r=e.seriesData,s=e.slider,l=n.Data,u=void 0===l?[]:l,b=n.Name,j=n.Unit,O=void 0===j?"gsm":j,m=Object(d.cloneDeep)(u),f={name:"markLines",type:"line",markLine:{symbol:"none",silent:!0,animation:!1,label:{position:"insideEndTop",formatter:"{b}: {c}"},lineStyle:{type:"solid",color:"#bcbcbc"},data:[]}};void 0!==(null===s||void 0===s?void 0:s.xAxis)&&f.markLine.data.push({name:"\u65f6\u95f4",xAxis:s.xAxis,label:{formatter:""}}),void 0!==(null===s||void 0===s?void 0:s.yAxis)&&f.markLine.data.push({name:"\u4f4d\u53f7",yAxis:s.yAxis-1,label:{formatter:function(e){var t=e.name,a=e.value;return"".concat(t,"\uff1a").concat(a+1)}}});var h=m.map((function(e){return e.T})),v=(null===(t=m[0])||void 0===t?void 0:t.P.map((function(e){return e[0]})))||[],x=Object(d.cloneDeep)(r),p=[];m.forEach((function(e,t){var a=e.P,n=void 0===a?[]:a;x.forEach((function(e){if(void 0!==e.fieldIndex){var a;!e.data&&(e.data=[]);var i=[];n.forEach((function(a,n){i.push([t,n,a[e.fieldIndex]]),p.push(a[e.fieldIndex])})),(a=e.data).push.apply(a,i)}}))}));var g=x.filter((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.length}));i({title:Object(o.a)(Object(o.a)({top:0,left:60,text:O},null===c||void 0===c?void 0:c.title),{},{textStyle:Object(o.a)({fontSize:12,fontWeight:"normal",color:"#aaa"},null===c||void 0===c||null===(a=c.title)||void 0===a?void 0:a.textStyle)}),grid:Object(o.a)({top:20,right:30,bottom:20,left:60,containLabel:!1},null===c||void 0===c?void 0:c.grid),tooltip:Object(o.a)(Object(o.a)({borderColor:"rgba(0,0,0,0)"},null===c||void 0===c?void 0:c.tooltip),{},{formatter:function(e){var t=e.name,a=e.marker,n=e.value;return"\n            <div>\n              <p>".concat(t,"</p>\n              <span>").concat(a,"\u4f4d\u53f7").concat(n[1]+1," ").concat(n[2],"</span>\n            </div>\n          ")}}),xAxis:Object(o.a)(Object(o.a)({},null===c||void 0===c?void 0:c.xAxis),{},{type:"category",data:h,splitArea:{show:!0},axisTick:{alignWithLabel:!0},axisLabel:{showMinLabel:!0,showMaxLabel:!0}}),yAxis:Object(o.a)(Object(o.a)({name:b,nameLocation:"center",nameGap:40,offset:13},null===c||void 0===c?void 0:c.yAxis),{},{type:"category",data:v,nameTextStyle:{color:"#000000"},splitArea:{show:!0},axisTick:{alignWithLabel:!0},axisLabel:{showMinLabel:!0,showMaxLabel:!0}}),visualMap:{min:Math.min.apply(Math,p),max:Math.max.apply(Math,p),show:!1},series:[f].concat(g.map((function(e){return function(e){var t=e.data,a=e.chartOption,n=void 0===a?{}:a;return Object(o.a)(Object(o.a)({},n),{},{type:"heatmap",data:t,emphasis:Object(o.a)({itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}},n.emphasis)})}(e)})))})}),300);return function(){return clearTimeout(t)}}),[e.chartData,e.chartOption,e.slider]),n?Object(b.jsx)(Ge.a,{lazyUpdate:!0,option:n,style:{height:"100%"}}):null},tt=function(e){var t=Object(l.useMemo)((function(){var t,a=e.chartData.Data,n=void 0===a?[]:a;return{xAxis:n.map((function(e){return e.T})),yAxis:(null===(t=n[0])||void 0===t?void 0:t.P.map((function(e){return e[0]})))||[]}}),[e.chartData]),a=Object(l.useMemo)((function(){var t=e.alignChartData,a=[];return(void 0===t?[]:t).forEach((function(e){var t,n=e.Data,i=void 0===n?[]:n,c=[];(null===(t=i[0])||void 0===t?void 0:t.P)&&i[0].P.forEach((function(e){c.push(e[1])})),!a.length&&(a=c),a=a.filter((function(e){return e&&c.includes(e)}))})),a}),[e.alignChartData]),n=Object(l.useMemo)((function(){return{xAxis:{min:0,max:t.xAxis.length-1},yAxis:{min:1,max:t.yAxis.length}}}),[t]);Object(l.useEffect)((function(){e.onRangeChange instanceof Function&&e.onRangeChange(n)}),[n]);var i=Object(l.useState)({xAxis:0,yAxis:0}),c=Object(s.a)(i,2),r=c[0],u=c[1],j=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?"xAxis"===a?t.xAxis.indexOf(e):t.yAxis.indexOf(e)+1:"xAxis"===a?t.xAxis[e]:t.yAxis[e-1]};Object(l.useEffect)((function(){var n={xAxis:Math.ceil(t.xAxis.length/2),yAxis:Math.ceil(t.yAxis.length/2)};if(a.length&&!a.includes(n.yAxis)){var i=Object(d.cloneDeep)(a);i.push(n.yAxis),i.sort((function(e,t){return e-t}));var c=i.indexOf(n.yAxis);if(0===c||c===i.length-1)n.yAxis=0===c?a[0]:a[a.length-1];else{var o=i[c]-i[c-1],r=i[c+1]-i[c];n.yAxis=o>r?i[c+1]:i[c-1]}}u(n),e.onChange instanceof Function&&e.onChange({xAxis:j(n.xAxis,"xAxis"),yAxis:j(n.yAxis,"yAxis")})}),[t,a]),Object(l.useEffect)((function(){void 0!==e.slider&&u({xAxis:j(e.slider.xAxis,"xAxis",!0),yAxis:j(e.slider.yAxis,"yAxis",!0)})}),[e.slider]);var O=Object(l.useMemo)((function(){var t=e.chartData.Data,a=(void 0===t?[]:t).find((function(e){return e.T===j(r.xAxis,"xAxis")}));return{xAxis:a,yAxis:null===a||void 0===a?void 0:a.P.find((function(e){return e[0]===j(r.yAxis,"yAxis")}))}}),[r,e.chartData]),m=Object(l.useMemo)((function(){var t=e.alignChartData,a=[];return(void 0===t?[]:t).forEach((function(e){var t=e.Data,n=(void 0===t?[]:t).find((function(e){var t;return e.T===(null===(t=O.xAxis)||void 0===t?void 0:t.T)})),i=null===n||void 0===n?void 0:n.P.find((function(e){return e[1]===j(r.yAxis,"yAxis")}));a.push({xAxis:n,yAxis:i})})),a}),[r,e.alignChartData,O]);Object(l.useEffect)((function(){e.onChartChange instanceof Function&&e.onChartChange({main:O,align:m})}),[O,m]);var f=Object(l.useRef)(null),h=E(f),v=Object(l.useMemo)((function(){if(!t.xAxis.length)return"6px 30px 6px 60px";var e=h.clientWidth/t.xAxis.length/2;return"6px ".concat(e+30,"px 6px ").concat(e+60,"px")}),[h,t]),x=e.sliderStyle,p=e.sliderVisible,g=void 0===p||p,I=e.chartData,_=e.chartHeight,N=e.chartOption,C=e.seriesData;return Object(b.jsxs)("div",{className:"chart-show",children:[g?Object(b.jsx)("div",{className:"chart-show__slider",style:Object(o.a)(Object(o.a)({},x),{},{padding:v}),children:Object(b.jsx)(He.a,Object(o.a)(Object(o.a)({},n.xAxis),{},{value:r.xAxis,tipFormatter:function(e){return j(e,"xAxis")},onChange:function(t){return function(t,a){var n=Object(o.a)(Object(o.a)({},r),{},Object($e.a)({},a,t));u(n),e.onChange instanceof Function&&e.onChange({xAxis:j(n.xAxis,"xAxis"),yAxis:j(n.yAxis,"yAxis")})}(t,"xAxis")}}))}):null,Object(b.jsx)("div",{ref:f,className:"chart-show__chart",style:{height:_||360},children:Object(b.jsx)(et,{chartData:I,chartOption:N,seriesData:C,slider:r})})]})},at=function(e){return e.previewType===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?Object(b.jsx)(ft,{filter:e.filter,controlId:e.controlId}):Object(b.jsx)(vt,{filter:e.filter,controlId:e.controlId})},nt=a(329),it=a(214),ct=a.n(it),ot=function(e){var t;return Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u65f6\u95f4",children:Object(b.jsx)(Me.a,{readOnly:!0,value:e.slider,suffix:Object(b.jsx)(nt.a,{}),className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524d\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===(t=e.matchChart)||void 0===t?void 0:t.Value,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"Max",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.chart.Max,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"Min",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.chart.Min,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"Avg",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.chart.Avg,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.chart.CoordinateMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.chart.CoordinateMin,className:"data-preview__form-input"})})]})},rt=[{field:"Value",chartOption:{lineOption:{name:"\u5f53\u524d\u503c"}}}],st=function(e){var t=Object(l.useMemo)((function(){if(e.filter){var t=e.previewType,a=e.controlId,n=e.filter,i=e.timeRange,c=n.ActuatorId,o=n.MeasuringObjectId;return t===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?{url:"datapreview/getAvgOrSigmaDataByMV",payload:{Type:e.isSigma?2:1,ControllerId:a,ActuatorId:c[0],MeasuringObjectIds:o,StartTime:ct()(i[0]).format("YYYY-MM-DD HH:mm:ss"),EndTime:ct()(i[1]).format("YYYY-MM-DD HH:mm:ss")},actChartsField:"Actuator",meaChartsField:"MeasuringObjects",mainChartField:"actCharts",alignChartsField:"meaCharts"}:{url:"datapreview/getAvgOrSigmaDataByCV",payload:{Type:e.isSigma?2:1,ControllerId:a,ActuatorIds:c,MeasuringObjectId:o[0],StartTime:ct()(i[0]).format("YYYY-MM-DD HH:mm:ss"),EndTime:ct()(i[1]).format("YYYY-MM-DD HH:mm:ss")},actChartsField:"Actuators",meaChartsField:"MeasuringObject",mainChartField:"meaCharts",alignChartsField:"actCharts"}}}),[e.previewType,e.controlId,e.filter,e.timeRange,e.isSigma]),a=Object(l.useState)({actCharts:[],meaCharts:[]}),n=Object(s.a)(a,2),i=n[0],c=n[1];Object(l.useEffect)((function(){t&&ee.a[t.url](t.payload).then((function(e){if(e){var a=[].concat(e[t.actChartsField]),n=[].concat(e[t.meaChartsField]);c({actCharts:a,meaCharts:n})}}))}),[t]);var o=Object(l.useState)(""),r=Object(s.a)(o,2),u=r[0],d=r[1],j=Object(l.useState)(),O=Object(s.a)(j,2),m=O[0],f=O[1],h=Object(l.useMemo)((function(){var e=[],a=(null===t||void 0===t?void 0:t.alignChartsField)||"meaCharts";return i[a].forEach((function(t){var a=t.Data,n=(void 0===a?[]:a).find((function(e){return e.Time===(null===m||void 0===m?void 0:m.Time)}));e.push(n)})),e}),[t,i,m]),v=Object(l.useState)(!1),x=Object(s.a)(v,2),p=x[0],g=x[1],I=(null===t||void 0===t?void 0:t.mainChartField)||"actCharts",_=(null===t||void 0===t?void 0:t.alignChartsField)||"meaCharts";return Object(b.jsxs)("div",{className:"pd-b36",children:[i[I].map((function(e,t){return Object(b.jsx)(B,{collapse:Object(b.jsx)(ot,{slider:u,chart:e,matchChart:m}),onChange:g,children:Object(b.jsx)(Xe,{slider:u,chartData:e,chartOption:{legend:{show:!1},yAxis:{name:""},title:{text:null===e||void 0===e?void 0:e.Name}},chartHeight:260,seriesData:rt,onChange:d,onChartChange:f})},"avg-main__chart-".concat(t))})),i[_].map((function(e,t){var a=h[t];return Object(b.jsx)(B,{showHandler:!1,visible:p,collapse:Object(b.jsx)(ot,{slider:u,chart:e,matchChart:a}),zoneClass:"border-top",zoneRightClass:"pd-t12",children:Object(b.jsx)(Xe,{sliderVisible:!1,slider:u,chartData:e,chartOption:{legend:{show:!1},yAxis:{name:""},title:{text:null===e||void 0===e?void 0:e.Name}},chartHeight:291,seriesData:rt})},"avg-align__chart-".concat(t))}))]})},lt=function(e){return Object(b.jsx)(st,Object(o.a)({isSigma:!0},e))},ut=function(e){var t=e.chartType,a=e.chart,n=void 0===a?{}:a,i=e.matchChart,c=void 0===i?{}:i,r=e.slider,s=e.range,l=void 0===s?{}:s,u=r.xAxis,d=r.yAxis,j=l.yAxis,O=c.xAxis,m=void 0===O?{}:O,f=c.yAxis,h=void 0===f?[]:f,v=m.S,x=m.A,p=m.I,g="actCharts"===t?"U":"Y";return Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u65f6\u95f4",children:Object(b.jsx)(Me.a,{readOnly:!0,value:u,suffix:Object(b.jsx)(nt.a,{}),className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"2\u03c3",children:Object(b.jsx)(Z.a,{disabled:!0,value:v,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"".concat(g,"Max"),children:Object(b.jsx)(Z.a,{disabled:!0,value:x,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"".concat(g,"Min"),children:Object(b.jsx)(Z.a,{disabled:!0,value:p,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u4f4d\u53f7",children:Object(b.jsx)(Z.a,Object(o.a)(Object(o.a)({disabled:e.sliderDisabled,value:d},j),{},{onChange:function(t){return e.onSliderChange instanceof Function&&e.onSliderChange(t)},className:"data-preview__form-input"}))}),Object(b.jsx)(J.a.Item,{label:"\u76ee\u6807\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:h[2],className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524d\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:h[3],className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:h[4],className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:h[5],className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.CoordinateMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.CoordinateMin,className:"data-preview__form-input"})})]})},dt=function(e){var t=Object(l.useMemo)((function(){if(e.filter){var t=e.previewType,a=e.controlId,n=e.filter,i=e.timeRange,c=n.ActuatorId,o=n.MeasuringObjectId;return t===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?{urls:["datapreview/getActuatorHistoryData","datapreview/getHistoryDataByMV"],payload:{ControllerId:a,ActuatorId:c[0],MeasuringObjectIds:o,StartTime:ct()(i[0]).format("YYYY-MM-DD HH:mm:ss"),EndTime:ct()(i[1]).format("YYYY-MM-DD HH:mm:ss")},dataChartsField:"Actuator"}:{urls:["datapreview/getMeasuringObjectHistoryData","datapreview/getHistoryDataByCV"],payload:{ControllerId:a,ActuatorIds:c,MeasuringObjectId:o[0],StartTime:ct()(i[0]).format("YYYY-MM-DD HH:mm:ss"),EndTime:ct()(i[1]).format("YYYY-MM-DD HH:mm:ss")},dataChartsField:"MeasuringObject"}}}),[e.previewType,e.controlId,e.filter,e.timeRange]),a=Object(l.useState)({actCharts:[],meaCharts:[],previewType:ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"],mainField:"actCharts",alignField:"meaCharts"}),n=Object(s.a)(a,2),i=n[0],c=n[1];Object(l.useEffect)((function(){t&&Promise.all(t.urls.map((function(e){return ee.a[e](t.payload)}))).then((function(e){if("Actuator"===t.dataChartsField){var a=[].concat(e[0]?e[0][t.dataChartsField]:[]),n=[].concat(e[1]||[]);c({actCharts:a,meaCharts:n,previewType:ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"],mainField:"actCharts",alignField:"meaCharts"})}else{var i=[].concat(e[1]||[]),o=[].concat(e[0]?e[0][t.dataChartsField]:[]);c({actCharts:i,meaCharts:o,previewType:ee.b["DATAPREVIEW/PREVIEW_TYPE_MEASURE"],mainField:"meaCharts",alignField:"actCharts"})}}))}),[t]);var r=Object(l.useState)({xAxis:"",yAxis:0}),u=Object(s.a)(r,2),d=u[0],j=u[1],O=Object(l.useState)({yAxis:{min:0,max:100}}),m=Object(s.a)(O,2),f=m[0],h=m[1],v=Object(l.useState)({main:{},align:[]}),x=Object(s.a)(v,2),p=x[0],g=x[1],I=Object(l.useState)(""),_=Object(s.a)(I,2),N=_[0],C=_[1];Object(l.useEffect)((function(){var e=function(e){C(e)};return ee.c.addListener(ee.b["DATAPREVIEW/EVT_CMDPREVIEW"],e),function(){ee.c.removeListener(ee.b["DATAPREVIEW/EVT_CMDPREVIEW"],e)}}),[]);var y=Object(l.useState)(!1),A=Object(s.a)(y,2),E=A[0],T=A[1];return Object(b.jsxs)("div",{className:"pd-b36",children:[i[i.mainField].map((function(e,t){return Object(b.jsxs)(B,{collapse:Object(b.jsx)(ut,{chartType:i.mainField,chart:e,matchChart:p.main,slider:d,range:f,onSliderChange:function(e){return j(Object(o.a)(Object(o.a)({},d),{},{yAxis:e}))}}),onChange:T,children:[Object(b.jsx)(tt,{slider:d,chartData:e,alignChartData:i[i.alignField],chartOption:{legend:{show:!1},yAxis:{name:""},title:{text:null===e||void 0===e?void 0:e.Name}},chartHeight:420,seriesData:[{fieldIndex:2,chartOption:{progressive:0}}],onChange:j,onRangeChange:h,onChartChange:g}),N?Object(b.jsx)(gt,{previewType:i.previewType,preview:N,chart:e,matchChart:p.main}):null]},"his-main__chart-".concat(t))})),i[i.alignField].map((function(e,t){var a=p.align[t],n=Object(o.a)(Object(o.a)({},d),{},{yAxis:a&&a.yAxis?a.yAxis[0]:0});return Object(b.jsxs)(B,{showHandler:!1,visible:E,collapse:Object(b.jsx)(ut,{sliderDisabled:!0,chartType:i.alignField,chart:e,matchChart:a,slider:n}),zoneClass:"border-top",zoneRightClass:"pd-t12",children:[Object(b.jsx)(tt,{sliderVisible:!1,slider:n,chartData:e,chartOption:{legend:{show:!1},yAxis:{name:""},title:{text:null===e||void 0===e?void 0:e.Name}},chartHeight:452,seriesData:[{fieldIndex:3,chartOption:{progressive:0}}]}),N?Object(b.jsx)(Nt,{previewType:i.previewType,preview:N,chart:e,matchChart:a}):null]},"his-align__chart-".concat(t))}))]})},bt=function(e){var t=Object(l.useMemo)((function(){switch(e.status){case ee.b["PAPERMONITOR/MACHINE_OFFLINE"]:return"#ff4d4f";case ee.b["PAPERMONITOR/MACHINE_DISABLED"]:return"#c4c4c4";default:return"#52c41a"}}),[e.status]);return Object(b.jsx)("div",{className:e.className,style:Object(o.a)(Object(o.a)({width:20,height:20,borderRadius:10},e.style),{},{backgroundColor:t})})},jt=function(e){var t=Object(l.useState)(!0),n=Object(s.a)(t,2),i=n[0],o=n[1],r=Object(Ce.f)(),u=e.machine,d=u.CVList,j=void 0===d?[]:d,O=u.MVList,m=void 0===O?[]:O,f=4*Math.ceil(m.length/4)-m.length,h=f>0?new Array(f).fill(!0):[];return Object(b.jsxs)("div",{className:"paper-monitor__control",children:[Object(b.jsxs)("div",{className:"paper-monitor__control-header",children:[Object(b.jsxs)("div",{className:"paper-monitor__control-zone disabled",children:[Object(b.jsxs)("div",{className:"display-flex flex-rowfsc",children:[Object(b.jsxs)("div",{className:"display-flex flex-1 flex-rowfsc",children:[Object(b.jsx)(bt,{status:ee.b["PAPERMONITOR/MACHINE_DISABLED"]}),Object(b.jsx)(c.a,{disabled:!0,size:"small",type:"primary",className:"mg-l18 pd-l24 pd-r24",style:{borderRadius:12},children:"MD\u63a7\u5236"})]}),Object(b.jsx)(ye.a,{onClick:function(){return o(!i)},className:"fz-16 cursor-pointer ".concat(i?"expand":"collapse")})]}),Object(b.jsxs)("div",{className:"mg-t8",style:{display:i?"block":"none"},children:[Object(b.jsxs)("div",{className:"display-flex flex-rowfsc",children:[Object(b.jsx)("div",{className:"display-flex flex-3"}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"PV"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"SP"})]})]}),Object(b.jsxs)("div",{className:"display-flex flex-rowfsc pd-t10 pd-b10 border-bottom",children:[Object(b.jsxs)("div",{className:"display-flex flex-3 flex-rowfsc",children:[Object(b.jsx)(p,{type:"icon-zhongliang",size:28}),Object(b.jsx)("span",{className:"fz-14 pd-l18",children:"\u514b\u91cd gsm"})]}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"163"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"52"})]})]}),Object(b.jsxs)("div",{className:"display-flex flex-rowfsc pd-t10",children:[Object(b.jsxs)("div",{className:"display-flex flex-3 flex-rowfsc",children:[Object(b.jsx)(p,{type:"icon-shiyangshuifen",size:28}),Object(b.jsx)("span",{className:"fz-14 pd-l18",children:"\u6c34\u5206 %"})]}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"95"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"226"})]})]})]})]}),Object(b.jsxs)("div",{className:"paper-monitor__control-zone",children:[Object(b.jsxs)("div",{className:"display-flex flex-rowfsc",children:[Object(b.jsxs)("div",{className:"display-flex flex-1 flex-rowfsc",children:[Object(b.jsx)(bt,{status:ee.b["PAPERMONITOR/MACHINE_ONLINE"]}),Object(b.jsx)(c.a,{size:"small",type:"primary",onClick:function(){var t=ae.b.flatMenus.find((function(e){var t;return(null===(t=e.Nav_MenuForm)||void 0===t?void 0:t.CODE)===ee.b["FORM/CODE_RTM003"]}));t&&r.push({pathname:"/main/".concat(t.ID),search:"?OrgId=".concat(e.orgId)})},className:"mg-l18 pd-l24 pd-r24",style:{borderRadius:12},children:"CD\u63a7\u5236"})]}),Object(b.jsx)(ye.a,{onClick:function(){return o(!i)},className:"fz-16 cursor-pointer ".concat(i?"expand":"collapse")})]}),Object(b.jsxs)("div",{className:"mg-t8",style:{display:i?"block":"none"},children:[Object(b.jsxs)("div",{className:"display-flex flex-rowfsc",children:[Object(b.jsx)("div",{className:"display-flex flex-3"}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"2\u03c3"})]})]}),j.map((function(e,t){var a="display-flex flex-rowfsc pd-t10 ".concat(0===t||t!==j.length-1?"pd-b10 border-bottom":"");return Object(b.jsxs)("div",{className:a,children:[Object(b.jsxs)("div",{className:"display-flex flex-3 flex-rowfsc",children:[Object(b.jsx)(p,{type:e.Icon,size:28}),Object(b.jsx)("span",{className:"fz-14 pd-l18",children:e.Name})]}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:e.TowSigma})]})]},"".concat(e.Name,"_").concat(t))}))]})]}),Object(b.jsxs)("div",{className:"paper-monitor__control-zone disabled",children:[Object(b.jsxs)("div",{className:"display-flex flex-rowfsc",children:[Object(b.jsxs)("div",{className:"display-flex flex-1 flex-rowfsc",children:[Object(b.jsx)(bt,{status:ee.b["PAPERMONITOR/MACHINE_DISABLED"]}),Object(b.jsx)(c.a,{disabled:!0,size:"small",type:"primary",className:"mg-l18 pd-l24 pd-r24",style:{borderRadius:12},children:"\u4e00\u952e\u542f\u505c"})]}),Object(b.jsx)(ye.a,{onClick:function(){return o(!i)},className:"fz-16 cursor-pointer ".concat(i?"expand":"collapse")})]}),Object(b.jsxs)("div",{className:"mg-t8",style:{display:i?"block":"none"},children:[Object(b.jsxs)("div",{className:"display-flex flex-rowfsc",children:[Object(b.jsx)("div",{className:"display-flex flex-3"}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center opacity-0",children:"opacity"})]})]}),Object(b.jsxs)("div",{className:"display-flex flex-rowfsc pd-t10 pd-b10 border-bottom",children:[Object(b.jsxs)("div",{className:"display-flex flex-3 flex-rowfsc",children:[Object(b.jsx)(p,{type:"icon-yijianqiting",size:28}),Object(b.jsx)("span",{className:"fz-14 pd-l18",children:"\u4e00\u952e\u542f\u505c"})]}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:Object(b.jsx)(ze.a,{disabled:!0})})]})]})]})]}),Object(b.jsxs)("div",{className:"paper-monitor__control-zone disabled",children:[Object(b.jsxs)("div",{className:"display-flex flex-rowfsc",children:[Object(b.jsxs)("div",{className:"display-flex flex-1 flex-rowfsc",children:[Object(b.jsx)(bt,{status:ee.b["PAPERMONITOR/MACHINE_DISABLED"]}),Object(b.jsx)(c.a,{disabled:!0,size:"small",type:"primary",className:"mg-l18 pd-l24 pd-r24",style:{borderRadius:12},children:"\u667a\u80fd\u6539\u6284"})]}),Object(b.jsx)(ye.a,{onClick:function(){return o(!i)},className:"fz-16 cursor-pointer ".concat(i?"expand":"collapse")})]}),Object(b.jsxs)("div",{className:"mg-t8",style:{display:i?"block":"none"},children:[Object(b.jsxs)("div",{className:"display-flex flex-rowfsc",children:[Object(b.jsx)("div",{className:"display-flex flex-3"}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"SP"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"\u76ee\u6807"})]})]}),Object(b.jsxs)("div",{className:"display-flex flex-rowfsc pd-t10 pd-b10 border-bottom",children:[Object(b.jsxs)("div",{className:"display-flex flex-3 flex-rowfsc",children:[Object(b.jsx)(p,{type:"icon-zhongliang",size:28}),Object(b.jsx)("span",{className:"fz-14 pd-l18",children:"\u514b\u91cd gsm"})]}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"163"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"52"})]})]}),Object(b.jsxs)("div",{className:"display-flex flex-rowfsc pd-t10",children:[Object(b.jsxs)("div",{className:"display-flex flex-3 flex-rowfsc",children:[Object(b.jsx)(p,{type:"icon-shiyangshuifen",size:28}),Object(b.jsx)("span",{className:"fz-14 pd-l18",children:"\u6c34\u5206 %"})]}),Object(b.jsxs)("div",{className:"display-flex flex-2",children:[Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"95"}),Object(b.jsx)("div",{className:"flex-1 fz-14 text-center",children:"226"})]})]})]})]})]}),Object(b.jsx)("div",{className:"paper-monitor__control-img",style:{backgroundImage:"url(".concat(a(499).default,")")}}),Object(b.jsxs)("div",{className:"paper-monitor__control-mv",children:[m.map((function(e,t){var a=e.Name,n=e.Icon,i=e.Values,c=void 0===i?[]:i;return Object(b.jsxs)("div",{className:"paper-monitor__control-mvZone",children:[Object(b.jsxs)("div",{className:"display-flex flex-rowfsc mg-b8",children:[Object(b.jsx)(p,{type:n,size:28}),Object(b.jsx)("span",{className:"fz-16 pd-l12",children:a})]}),c.map((function(e,t){var a="pd-t10 overflow-hidden ".concat(0===t||t!==c.length-1?"pd-b10 border-bottom":"");return Object(b.jsxs)("div",{className:a,children:[Object(b.jsx)("span",{className:"float-left fz-14",children:e.Name}),Object(b.jsx)("span",{className:"float-right fz-14",children:e.Value})]},"".concat(e.Name,"_").concat(t))}))]},"".concat(a,"_").concat(t))})),h.map((function(e,t){return Object(b.jsx)("div",{className:"paper-monitor__control-mvZone opacity-0"},"fake-mv_".concat(t))}))]})]})},Ot=[{label:"\u5e73\u5747\u503c",value:"AvgValue"},{label:"2\u03c3",value:"TwoSigma"}],mt=function(e){var t=Object(l.useState)([]),a=Object(s.a)(t,2),n=a[0],i=a[1],c=Object(l.useState)(""),o=Object(s.a)(c,2),r=o[0],u=o[1],d=Object(l.useState)([]),j=Object(s.a)(d,2),O=j[0],m=j[1],f=Object(l.useState)([]),h=Object(s.a)(f,2),v=h[0],x=h[1];Object(l.useEffect)((function(){ee.a["home/getActuatorsByMachine"]({OrgId:e.orgId}).then((function(e){e&&i(e)}))}),[]),Object(l.useEffect)((function(){var e=n[0]||{},t=e.Id,a=e.CVList,i=void 0===a?[]:a;u(t),m(i),x(i.map((function(e){return e.Id})))}),[n]);var p=Object(l.useState)([]),g=Object(s.a)(p,2),I=g[0],_=g[1];Object(l.useEffect)((function(){r&&ee.a["home/getMachineCurveData"]({ActuatorId:r,MeasuringObjectIds:v}).then((function(e){e&&_(e)}))}),[r,v]);var N=Object(l.useState)("AvgValue"),C=Object(s.a)(N,2),y=C[0],A=C[1],E=Object(l.useState)(""),T=Object(s.a)(E,2),M=T[0],S=T[1],P=Object(l.useMemo)((function(){return I.map((function(e){return{field:e.Id,chartOption:{lineOption:{name:e.Name}}}}))}),[I]),D=Object(l.useMemo)((function(){var e,t,a=(null===(e=I[0])||void 0===e||null===(t=e.Data)||void 0===t?void 0:t.map((function(e){return{Time:e.Time}})))||[];return a.forEach((function(e){P.forEach((function(t){var a=I.find((function(e){return e.Id===t.field})).Data.find((function(t){return t.Time===e.Time}));e[t.field]=a[y]}))})),{Data:a}}),[P,I,y]),w=Object(l.useMemo)((function(){var e=[];return v.forEach((function(t,a){var n,i=I.find((function(e){return e.Id===t})),c=null===i||void 0===i||null===(n=i.Data)||void 0===n?void 0:n.find((function(e){return e.Time===M}));e.push({No:a+1,Name:null===i||void 0===i?void 0:i.Name,Value:null===c||void 0===c?void 0:c[y],Unit:null===i||void 0===i?void 0:i.Unit})})),{columns:[{title:"\u5e8f\u53f7",dataIndex:"No"},{title:"\u540d\u79f0",dataIndex:"Name"},{title:"\u72b6\u6001",dataIndex:"Value"},{title:"\u5355\u4f4d",dataIndex:"Unit"}],dataSource:e}}),[M,v,I,y]);return console.log("tableData",w),Object(b.jsxs)("div",{className:"paper-monitor__chart",children:[Object(b.jsx)(J.a,{layout:"horizontal",labelCol:{span:6},wrapperCol:{span:18},className:"mg-b18",children:Object(b.jsxs)(Q.a,{gutter:24,children:[Object(b.jsx)(K.a,{span:8,children:Object(b.jsx)(J.a.Item,{label:"\u6267\u884c\u5668",children:Object(b.jsx)(L.a,{fieldNames:{label:"Name",value:"Id"},options:n,value:r,onChange:function(e){var t=n.find((function(t){return t.Id===e})),a=t.Id,i=t.CVList,c=void 0===i?[]:i;u(a),m(c),x(c.map((function(e){return e.Id})))},style:{width:"100%"}})})}),Object(b.jsx)(K.a,{span:8,children:Object(b.jsx)(J.a.Item,{label:"\u6d4b\u91cf\u5bf9\u8c61",children:Object(b.jsx)(L.a,{mode:"multiple",fieldNames:{label:"Name",value:"Id"},options:O,value:v,onChange:x,style:{width:"100%"}})})}),Object(b.jsx)(K.a,{span:8,children:Object(b.jsx)(J.a.Item,{label:"\u66f2\u7ebf\u7c7b\u522b",children:Object(b.jsx)(L.a,{options:Ot,value:y,onChange:A,style:{width:"100%"}})})})]})}),Object(b.jsx)(Xe,{slider:M,sliderPosition:"bottom",chartData:D,chartHeight:260,seriesData:P,onChange:S}),Object(b.jsx)(re.a,{pagination:!1,columns:w.columns,dataSource:w.dataSource,className:"mg-t18"})]})},ft=function(e){var t=Object(l.useState)({actChart:{},measureCharts:[]}),a=Object(s.a)(t,2),n=a[0],i=a[1],c=function(){if(e.filter){var t=e.filter,a=t.ActuatorId,n=t.MeasuringObjectId,c=[];a.length?c.push(ee.a["datapreview/getActuatorRealTimeData"]({ControllerId:e.controlId,ActuatorId:a[0]})):c.push(Promise.resolve({})),n.length?c.push(ee.a["datapreview/getRealTimeDataByMV"]({ControllerId:e.controlId,ActuatorId:a[0],MeasuringObjectIds:n})):c.push(Promise.resolve([])),Promise.all(c).then((function(e){var t=Object(s.a)(e,2),a=t[0],n=void 0===a?{}:a,c=t[1];i({actChart:n,measureCharts:void 0===c?[]:c})}))}};Object(l.useEffect)((function(){c()}),[e.controlId,e.filter]);var o=Object(l.useMemo)((function(){var e=n.measureCharts;if(!e.length)return{};for(var t=e[0],a=1,i=e.length;a<i;a++){e[a].PositionNumbers.length>t.PositionNumbers.length&&(t=e[a])}return t}),[n]),r=Object(l.useMemo)((function(){var e=Object(d.cloneDeep)(n).actChart,t=e.PositionNumbers,a=void 0===t?[]:t,i=o.PositionNumbers;return(void 0===i?[]:i).forEach((function(e){var t=a.find((function(t){return t.PositionNumber===e.AlignPositionNumber}));t&&(t.AlignPositionNumber=e.PositionNumber)})),e}),[n,o]),u=Object(l.useState)(0),j=Object(s.a)(u,2),O=j[0],m=j[1],f=Object(l.useState)(),h=Object(s.a)(f,2),v=h[0],x=h[1],p=Object(l.useMemo)((function(){var e=[];return n.measureCharts.forEach((function(t){var a=t.PositionNumbers,n=(void 0===a?[]:a).find((function(e){return e.AlignPositionNumber===(null===v||void 0===v?void 0:v.PositionNumber)}));e.push(n)})),e}),[n,v]);Object(l.useEffect)((function(){return ee.c.addListener(ee.b["DATAPREVIEW/EVT_SNAPSHOT"],c),function(){ee.c.removeListener(ee.b["DATAPREVIEW/EVT_SNAPSHOT"],c)}}),[e.controlId,e.filter]);var g=Object(l.useState)(!1),I=Object(s.a)(g,2),_=I[0],N=I[1],C=[{field:"PVValue",chartOption:{lineOption:{name:"\u5f53\u524d\u503c"}}}],y=Object(l.useMemo)((function(){var e=r.PositionNumbers,t=void 0===e?[]:e;return[{field:"SPValue",chartOption:{barOption:{name:"\u5f53\u524d\u503cSP",barMaxWidth:13-2*Math.floor(t.length/50)}}},{field:"PVValue",zeroToUndefined:!0,chartOption:{legend:{data:[{icon:"circle"}]},lineOption:{name:"\u5f53\u524d\u503cPV",symbol:"circle",symbolSize:6,lineStyle:{opacity:0},areaStyle:{color:"rgba(0,0,0,0)"}}}},{field:"SnapSPValue",chartOption:{legend:{data:[{icon:"path://M0 0 H150 V12 H0 Z"}]},lineOption:{name:"\u5feb\u7167SP",areaStyle:{color:"rgba(0,0,0,0)"}}}}]}),[r]),A=Object(l.useMemo)((function(){var e=r.PositionNumbers,t=void 0===e?[]:e;return{title:{show:!1},xAxis:{maxInterval:Math.ceil(t.length/50),axisTick:{show:!1}}}}),[r]);return Object(b.jsxs)("div",{className:"pd-b36",children:[Object(b.jsx)(B,{collapse:Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u4f4d\u53f7",children:Object(b.jsx)(Z.a,{value:O,onChange:m,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524dSP",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===v||void 0===v?void 0:v.SPValue,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524dPV",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===v||void 0===v?void 0:v.PVValue,className:"data-preview__form-input"})}),n.measureCharts.map((function(e,t){var a=p[t];return Object(b.jsx)(J.a.Item,{label:"\u5bf9\u9f50Y".concat(t+1),children:Object(b.jsx)(Z.a,{disabled:!0,value:null===a||void 0===a?void 0:a.AlignValue,className:"data-preview__form-input"})},"act-realtime__form-".concat(t))})),Object(b.jsx)(J.a.Item,{label:"2\u03c3",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.actChart.TwoSigma,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"UMax",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.actChart.UMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"UMin",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.actChart.UMin,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"U\u5e73\u5747",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.actChart.UAvg,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.actChart.CoordinateMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.actChart.CoordinateMin,className:"data-preview__form-input"})})]}),onChange:N,children:Object(b.jsx)(Ze,{slider:O,chartData:r,alignChartData:o,chartOption:A,chartHeight:340+40*n.measureCharts.length,seriesData:y,onChange:m,onChartChange:x})}),n.measureCharts.map((function(e,t){var a=p[t],n=e!==o?function(e){var t=e.PositionNumbers,a=void 0===t?[]:t,n=r.PositionNumbers,i=void 0===n?[]:n;return a.forEach((function(e){var t=i.find((function(t){return e.AlignPositionNumber===t.PositionNumber}));t&&(e.AlignPositionNumber=t.AlignPositionNumber)})),e}(Object(d.cloneDeep)(e)):e,i=e!==o?o:void 0,c={title:{text:"Y".concat(t+1,"\uff1a").concat(e.Name)}};!i&&(c.xAxis={axisLabel:{showMinLabel:!0,showMaxLabel:!0}});var s=Object.assign(c,function(e){var t=e.PositionNumbers,a=(void 0===t?[]:t).map((function(e){return e.PVValue})).filter((function(e){return e})),n=Math.max.apply(Math,Object(_e.a)(a));return{legend:{show:!1},yAxis:{name:""},dataZoom:[{type:"slider",right:10,width:18,yAxisIndex:0,filterMode:"none",startValue:Math.min.apply(Math,Object(_e.a)(a))||0,endValue:n||void 0},{type:"inside",yAxisIndex:0,filterMode:"none"}]}}(n));return Object(b.jsx)(B,{showHandler:!1,visible:_,collapse:Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u5bf9\u9f50\u4f4d\u53f7",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===a||void 0===a?void 0:a.PositionNumber,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524d\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===a||void 0===a?void 0:a.PVValue,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"2\u03c3",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.TwoSigma,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"YMax",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.YMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"YMin",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.YMin,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"Y\u5e73\u5747",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.YAvg,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.CoordinateMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.CoordinateMin,className:"data-preview__form-input"})})]}),zoneClass:"border-top",zoneRightClass:"pd-t12",children:Object(b.jsx)(Ze,{slider:null===a||void 0===a?void 0:a.PositionNumber,sliderVisible:!1,chartData:n,alignChartData:i,chartOption:s,chartHeight:330,seriesData:C})},"act-realtime__chart-".concat(t))}))]})},ht="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjQwNzY5OTA2MjYwIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEzMjY1IiB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTE1OC43MiA1NDcuODRIMjUuNmMtNS42MzIgMC0xMC4yNC00LjYwOC0xMC4yNC0xMC4yNFY0ODEuMjhjMC01LjYzMiA0LjYwOC0xMC4yNCAxMC4yNC0xMC4yNGgxMzMuMTJjNS42MzIgMCAxMC4yNCA0LjYwOCAxMC4yNCAxMC4yNHY1Ni4zMmMwIDUuNjMyLTQuNjA4IDEwLjI0LTEwLjI0IDEwLjI0ek00NDAuMzIgNTQ3Ljg0SDMwNy4yYy01LjYzMiAwLTEwLjI0LTQuNjA4LTEwLjI0LTEwLjI0VjQ4MS4yOGMwLTUuNjMyIDQuNjA4LTEwLjI0IDEwLjI0LTEwLjI0aDEzMy4xMmM1LjYzMiAwIDEwLjI0IDQuNjA4IDEwLjI0IDEwLjI0djU2LjMyYzAgNS42MzItNC42MDggMTAuMjQtMTAuMjQgMTAuMjR6TTcyMS45MiA1NDcuODRoLTEzMy4xMmMtNS42MzIgMC0xMC4yNC00LjYwOC0xMC4yNC0xMC4yNFY0ODEuMjhjMC01LjYzMiA0LjYwOC0xMC4yNCAxMC4yNC0xMC4yNGgxMzMuMTJjNS42MzIgMCAxMC4yNCA0LjYwOCAxMC4yNCAxMC4yNHY1Ni4zMmMwIDUuNjMyLTQuNjA4IDEwLjI0LTEwLjI0IDEwLjI0ek0xMDAzLjUyIDU0Ny44NGgtMTMzLjEyYy01LjYzMiAwLTEwLjI0LTQuNjA4LTEwLjI0LTEwLjI0VjQ4MS4yOGMwLTUuNjMyIDQuNjA4LTEwLjI0IDEwLjI0LTEwLjI0aDEzMy4xMmM1LjYzMiAwIDEwLjI0IDQuNjA4IDEwLjI0IDEwLjI0djU2LjMyYzAgNS42MzItNC42MDggMTAuMjQtMTAuMjQgMTAuMjR6IiBwLWlkPSIxMzI2NiIgZmlsbD0iI2JjYmNiYyI+PC9wYXRoPjwvc3ZnPg==",vt=function(e){var t=Object(l.useState)({actCharts:[],measureChart:{}}),a=Object(s.a)(t,2),n=a[0],i=a[1],c=function(){if(e.filter){var t=e.filter,a=t.ActuatorId,n=t.MeasuringObjectId,c=[];a.length?c.push(ee.a["datapreview/getRealTimeDataByCV"]({ControllerId:e.controlId,MeasuringObjectId:n[0],ActuatorIds:a})):c.push(Promise.resolve([])),n.length?c.push(ee.a["datapreview/getMeasuringObjectRealTimeData"]({ControllerId:e.controlId,MeasuringObjectId:n[0]})):c.push(Promise.resolve({})),Promise.all(c).then((function(e){var t=Object(s.a)(e,2),a=t[0],n=void 0===a?[]:a,c=t[1];i({actCharts:n,measureChart:void 0===c?{}:c})}))}};Object(l.useEffect)((function(){c()}),[e.controlId,e.filter]);var o=Object(l.useState)(0),r=Object(s.a)(o,2),u=r[0],d=r[1],j=Object(l.useState)(),O=Object(s.a)(j,2),m=O[0],f=O[1],h=Object(l.useMemo)((function(){var e=[];return n.actCharts.forEach((function(t){var a=t.PositionNumbers,n=(void 0===a?[]:a).find((function(e){return e.AlignPositionNumber===(null===m||void 0===m?void 0:m.PositionNumber)}));e.push(n)})),e}),[n,m]);Object(l.useEffect)((function(){return ee.c.addListener(ee.b["DATAPREVIEW/EVT_SNAPSHOT"],c),function(){ee.c.removeListener(ee.b["DATAPREVIEW/EVT_SNAPSHOT"],c)}}),[e.controlId,e.filter]);var v=Object(l.useState)(!1),x=Object(s.a)(v,2),p=x[0],g=x[1],I=[{field:"PVValue",chartOption:{legend:{data:[{icon:"path://M0 0 H150 V12 H0 Z"}]},lineOption:{name:"\u5f53\u524d\u503c"}}},{field:"SnapPVValue",chartOption:{legend:{data:[{icon:"path://M0 0 H150 V12 H0 Z"}]},lineOption:{name:"\u5feb\u7167\u503c"}}},{field:"SPValue",chartOption:{legend:{data:[{icon:"image://".concat(ht)}]},lineOption:{name:"\u76ee\u6807\u503c",lineStyle:{type:"dashed",color:"#bcbcbc"},areaStyle:{color:"rgba(0,0,0,0)"}}}}],_=Object(l.useMemo)((function(){var e=n.measureChart.PositionNumbers,t=(void 0===e?[]:e).map((function(e){return e.PVValue})).filter((function(e){return e})),a=Math.max.apply(Math,Object(_e.a)(t));return{title:{top:40},grid:{top:60},xAxis:{axisLabel:{showMinLabel:!0,showMaxLabel:!0}},dataZoom:[{type:"slider",right:10,width:18,yAxisIndex:0,filterMode:"none",startValue:Math.min.apply(Math,Object(_e.a)(t))||0,endValue:a||void 0},{type:"inside",yAxisIndex:0,filterMode:"none"}]}}),[n.measureChart]);return Object(b.jsxs)("div",{className:"pd-b36",children:[Object(b.jsx)(B,{collapse:Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u4f4d\u53f7",children:Object(b.jsx)(Z.a,{value:u,onChange:d,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524d\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===m||void 0===m?void 0:m.PVValue,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u76ee\u6807\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===m||void 0===m?void 0:m.SPValue,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"2\u03c3",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.measureChart.TwoSigma,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"YMax",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.measureChart.YMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"YMin",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.measureChart.YMin,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"Y\u5e73\u5747",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.measureChart.YAvg,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.measureChart.CoordinateMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:n.measureChart.CoordinateMin,className:"data-preview__form-input"})})]}),onChange:g,children:Object(b.jsx)(Ze,{timeVisible:!0,slider:u,chartData:n.measureChart,chartOption:_,chartHeight:340,seriesData:I,onChange:d,onChartChange:f})}),n.actCharts.map((function(e,t){var a=h[t],i=function(e){var t=e.PositionNumbers,a=void 0===t?[]:t;return{legend:{show:!1},xAxis:{maxInterval:Math.ceil(a.length/50),axisTick:{show:!1}},yAxis:{name:""}}}(e),c=function(e){var t=e.PositionNumbers,a=void 0===t?[]:t;return[{field:"SPValue",chartOption:{barOption:{name:"\u5f53\u524d\u503cSP",barMaxWidth:13-2*Math.floor(a.length/50)}}}]}(e);return Object(b.jsx)(B,{showHandler:!1,visible:p,collapse:Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u5bf9\u9f50\u4f4d\u53f7",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===a||void 0===a?void 0:a.PositionNumber,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524dSP",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===a||void 0===a?void 0:a.SPValue,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524dPV",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===a||void 0===a?void 0:a.PVValue,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"2\u03c3",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.TwoSigma,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"UMax",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.UMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"UMin",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.UMin,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"U\u5e73\u5747",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.UAvg,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.CoordinateMax,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:e.CoordinateMin,className:"data-preview__form-input"})})]}),zoneClass:"border-top",zoneRightClass:"pd-t12",children:Object(b.jsx)(Ze,{slider:null===a||void 0===a?void 0:a.PositionNumber,sliderVisible:!1,chartData:e,alignChartData:n.measureChart,chartOption:Object.assign(i,{title:{text:e.Name}}),chartHeight:330,seriesData:c,onAlignChange:d})},"mea-realtime__chart-".concat(t))}))]})},xt=function(e){var t=Object(l.useMemo)((function(){var t=e.previewType,a=e.chart,n=e.matchChart,i=n.xAxis,c=void 0===i?{}:i,r=n.yAxis,s=void 0===r?[]:r,l=Object(d.cloneDeep)(a);l.Data.forEach((function(e){var a=e.P.find((function(e){return e[0]===s[0]}));e.Time=e.T,e.Value=a?t===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?a[2]:a[3]:0}));var u={xAxis:c,yAxis:s,chartData:l,series:[{field:"Value",chartOption:{lineOption:{name:"\u5f53\u524d\u503c"}}}],option:{title:{text:l.Name},legend:{show:!1},yAxis:{name:""}}};return t===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?Object(o.a)(Object(o.a)({},u),{},{maxText:"UMax",minText:"UMin"}):Object(o.a)(Object(o.a)({},u),{},{maxText:"YMax",minText:"YMin"})}),[e.previewType,e.chart,e.matchChart]);return Object(b.jsx)(B,{collapse:Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u4f4d\u53f7",children:Object(b.jsx)(Me.a,{disabled:!0,value:t.yAxis[0],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"SP",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.yAxis[2],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"PV",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.yAxis[3],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:t.maxText,children:Object(b.jsx)(Z.a,{disabled:!0,value:t.xAxis.A,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:null===t||void 0===t?void 0:t.minText,children:Object(b.jsx)(Z.a,{disabled:!0,value:t.xAxis.I,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.chartData.CoordinateMax,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.chartData.CoordinateMin,className:"data-preview__form-input"})})]}),zoneRightClass:"pd-t12",children:Object(b.jsx)(Xe,{sliderVisible:!1,chartData:t.chartData,chartOption:t.option,chartHeight:444,seriesData:t.series})})},pt=function(e){var t=Object(l.useMemo)((function(){var t,a=e.previewType,n=e.chart,i=e.matchChart,c=i.xAxis,r=void 0===c?{}:c,s=i.yAxis,l=void 0===s?[]:s,u=Object(d.omit)(n,["Data"]);u.PositionNumbers=(null===(t=r.P)||void 0===t?void 0:t.map((function(e){return{PositionNumber:e[0],SPValue:e[2],PVValue:e[3]}})))||[];var b={xAxis:r,yAxis:l,chartData:u};return a===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?Object(o.a)(Object(o.a)({},b),{},{series:[{field:"SPValue",chartOption:{barOption:{name:"SP\u503c"}}},{field:"PVValue",chartOption:{legend:{data:[{icon:"circle"}]},lineOption:{name:"PV\u503c",symbol:"circle",symbolSize:6,areaStyle:{color:"rgba(0,0,0,0)"}}}}],option:{title:{text:u.Name},legend:{show:!1},xAxis:{maxInterval:1,axisTick:{show:!1}},yAxis:{name:""}},maxText:"UMax",minText:"UMin"}):Object(o.a)(Object(o.a)({},b),{},{series:[{field:"PVValue",chartOption:{lineOption:{name:"PV\u503c"}}}],option:{title:{text:u.Name},legend:{show:!1},yAxis:{name:""}},maxText:"YMax",minText:"YMin"})}),[e.previewType,e.chart,e.matchChart]);return Object(b.jsx)(B,{collapse:Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u5f53\u524d\u65f6\u95f4",children:Object(b.jsx)(Me.a,{disabled:!0,value:t.xAxis.T,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"SP",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.yAxis[2],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"PV",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.yAxis[3],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:t.maxText,children:Object(b.jsx)(Z.a,{disabled:!0,value:t.xAxis.A,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:null===t||void 0===t?void 0:t.minText,children:Object(b.jsx)(Z.a,{disabled:!0,value:t.xAxis.I,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.chartData.CoordinateMax,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.chartData.CoordinateMin,className:"data-preview__form-input"})})]}),zoneRightClass:"pd-t12",children:Object(b.jsx)(Ze,{sliderVisible:!1,chartData:t.chartData,chartOption:t.option,chartHeight:444,seriesData:t.series})})},gt=function(e){var t=e.previewType,a=e.preview,n=e.chart,i=e.matchChart;return Object(b.jsx)("div",{className:"data-preview__chart-preview",children:a===ee.b["DATAPREVIEW/PREVIEW_TYPE_CD"]?Object(b.jsx)(pt,{previewType:t,chart:n,matchChart:i}):Object(b.jsx)(xt,{previewType:t,chart:n,matchChart:i})})},It=function(e){var t=Object(l.useMemo)((function(){var t=e.previewType,a=e.chart,n=e.matchChart,i=n.xAxis,c=void 0===i?{}:i,r=n.yAxis,s=void 0===r?[]:r,l=Object(d.cloneDeep)(a);l.Data.forEach((function(e){var a=e.P.find((function(e){return e[0]===s[0]}));e.Time=e.T,e.Value=a?t===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?a[3]:a[2]:0}));var u={xAxis:c,yAxis:s,chartData:l,series:[{field:"Value",chartOption:{lineOption:{name:"\u5f53\u524d\u503c"}}}],option:{title:{text:l.Name},legend:{show:!1},yAxis:{name:""}}};return t===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?Object(o.a)(Object(o.a)({},u),{},{maxText:"YMax",minText:"YMin"}):Object(o.a)(Object(o.a)({},u),{},{maxText:"UMax",minText:"UMin"})}),[e.previewType,e.chart,e.matchChart]);return Object(b.jsx)(B,{collapse:Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u5bf9\u9f50\u4f4d\u53f7",children:Object(b.jsx)(Me.a,{disabled:!0,value:t.yAxis[0],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"SP",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.yAxis[2],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"PV",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.yAxis[3],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:t.maxText,children:Object(b.jsx)(Z.a,{disabled:!0,value:t.xAxis.A,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:null===t||void 0===t?void 0:t.minText,children:Object(b.jsx)(Z.a,{disabled:!0,value:t.xAxis.I,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.chartData.CoordinateMax,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.chartData.CoordinateMin,className:"data-preview__form-input"})})]}),zoneRightClass:"pd-t12",children:Object(b.jsx)(Xe,{sliderVisible:!1,chartData:t.chartData,chartOption:t.option,chartHeight:452,seriesData:t.series})})},_t=function(e){var t=Object(l.useMemo)((function(){var t,a=e.previewType,n=e.chart,i=e.matchChart,c=i.xAxis,r=void 0===c?{}:c,s=i.yAxis,l=void 0===s?[]:s,u=Object(d.omit)(n,["Data"]);u.PositionNumbers=(null===(t=r.P)||void 0===t?void 0:t.map((function(e){return{PositionNumber:e[0],SPValue:e[2],PVValue:e[3]}})))||[];var b={xAxis:r,yAxis:l,chartData:u};return a===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?Object(o.a)(Object(o.a)({},b),{},{series:[{field:"PVValue",chartOption:{legend:{data:[{icon:"circle"}]},lineOption:{name:"PV\u503c"}}}],option:{title:{text:u.Name},legend:{show:!1},yAxis:{name:""}},maxText:"YMax",minText:"YMin"}):Object(o.a)(Object(o.a)({},b),{},{series:[{field:"SPValue",chartOption:{barOption:{name:"SP\u503c"}}}],option:{title:{text:u.Name},legend:{show:!1},xAxis:{maxInterval:1,axisTick:{show:!1}},yAxis:{name:""}},maxText:"UMax",minText:"UMin"})}),[e.previewType,e.chart,e.matchChart]);return Object(b.jsx)(B,{collapse:Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u5f53\u524d\u65f6\u95f4",children:Object(b.jsx)(Me.a,{disabled:!0,value:t.xAxis.T,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"SP",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.yAxis[2],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"PV",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.yAxis[3],className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:t.maxText,children:Object(b.jsx)(Z.a,{disabled:!0,value:t.xAxis.A,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:null===t||void 0===t?void 0:t.minText,children:Object(b.jsx)(Z.a,{disabled:!0,value:t.xAxis.I,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.chartData.CoordinateMax,className:"data-preview__form-input mg-b26"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:t.chartData.CoordinateMin,className:"data-preview__form-input"})})]}),zoneRightClass:"pd-t12",children:Object(b.jsx)(Ze,{sliderVisible:!1,chartData:t.chartData,chartOption:t.option,chartHeight:452,seriesData:t.series})})},Nt=function(e){var t=e.previewType,a=e.preview,n=e.chart,i=e.matchChart;return Object(b.jsx)("div",{className:"data-preview__chart-preview",children:a===ee.b["DATAPREVIEW/PREVIEW_TYPE_CD"]?Object(b.jsx)(_t,{previewType:t,chart:n,matchChart:i}):Object(b.jsx)(It,{previewType:t,chart:n,matchChart:i})})},Ct=(a(500),Ne.a.TabPane),yt=function(){var e=Object(l.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1];Object(l.useEffect)((function(){var e=ae.b.userinfo.ORG_ID;ee.a["home/getMachines"]({OrgId:e}).then((function(e){e&&i(e)}))}),[]);var o=Object(Ce.f)();return Object(b.jsx)("div",{className:"home",children:n.map((function(e,t){var r=e.Name,s=e.Img,l=e.IsOnline,u=e.OrgId,j=e.Tops,O=void 0===j?[]:j,m=e.Groups,f=void 0===m?[]:m,h=e.collapsed,v=void 0!==h&&h,x=s||"url(".concat(a(501).default,")"),g=Object(d.cloneDeep)(O);return g.splice(1,0,{isName:!0}),Object(b.jsxs)("div",{className:"home__paper",children:[Object(b.jsxs)("div",{className:"home__paper-overview",children:[Object(b.jsxs)("div",{className:"home__paper-pic",children:[Object(b.jsx)("div",{className:"home__paper-pic--bg",style:{backgroundImage:x}}),Object(b.jsxs)("div",{onClick:function(){e.collapsed=!v,i(Object(_e.a)(n))},className:"home__paper-pic--more",children:[Object(b.jsx)("span",{children:"\u66f4\u591a\u53c2\u6570"}),v?Object(b.jsx)(ye.a,{className:"fz-16 pd-l8"}):Object(b.jsx)(Ae.a,{className:"fz-16 pd-l8"}),Object(b.jsx)(bt,{status:l?ee.b["PAPERMONITOR/MACHINE_ONLINE"]:ee.b["PAPERMONITOR/MACHINE_OFFLINE"],className:"home__paper-pic--status"})]})]}),Object(b.jsx)("div",{className:"home__paper-vars overview",children:g.map((function(e,t){return e.isName?Object(b.jsx)("div",{className:"home__paper-vars--zone is-name",children:Object(b.jsx)(c.a,{block:!0,type:"primary",size:"large",onClick:function(){return function(e){var t=ae.b.flatMenus.find((function(e){var t;return(null===(t=e.Nav_MenuForm)||void 0===t?void 0:t.CODE)===ee.b["FORM/CODE_RTM002"]}));t&&o.push({pathname:"/main/".concat(t.ID),search:"?OrgId=".concat(e)})}(u)},children:r})},"".concat(e.Name,"_").concat(t)):Object(b.jsxs)("div",{className:"home__paper-vars--zone",children:[Object(b.jsx)(p,{type:e.Icon,size:52,style:{margin:"0 10%"}}),Object(b.jsxs)("div",{className:"text-left",children:[Object(b.jsx)("div",{className:"fz-16",children:e.Name}),Object(b.jsx)("div",{className:"fz-24",children:e.Value})]})]},"".concat(e.Name,"_").concat(t))}))})]}),Object(b.jsx)("div",{className:"home__paper-detail",style:{display:e.collapsed?"block":"none"},children:Object(b.jsxs)(Ne.a,{children:[f.map((function(e,t){var a=e.Vars,n=void 0===a?[]:a,i=3*Math.ceil(n.length/3)-n.length,c=i>0?new Array(i).fill(!0):[];return Object(b.jsx)(Ct,{tab:e.Name,children:Object(b.jsxs)("div",{className:"home__paper-vars details",children:[n.map((function(e,t){return Object(b.jsxs)("div",{className:"home__paper-vars--zone",children:[Object(b.jsx)(p,{type:e.Icon,size:52,style:{margin:"0 10%"}}),Object(b.jsxs)("div",{className:"text-left",children:[Object(b.jsx)("div",{className:"fz-16",children:e.Name}),Object(b.jsx)("div",{className:"fz-24",children:e.Value})]})]},"".concat(e.Name,"_").concat(t))})),c.map((function(e,t){return Object(b.jsx)("div",{className:"home__paper-vars--zone opacity-0"},"fake-vars_".concat(t))}))]})},"".concat(e.Id,"_").concat(t))})),f.length?null:Object(b.jsx)("div",{className:"text-center",children:Object(b.jsx)(Ie.a,{description:Object(b.jsx)("p",{className:"text-attach",children:"\u6682\u65e0\u66f4\u591a\u53c2\u6570"})})})]})})]},"".concat(r,"_").concat(t))}))})},At=a(502),Et=a(245),Tt=a.n(Et),Mt=(a(535),[{label:"\u63a7\u5236\u9875\u9762",value:1},{label:"\u66f2\u7ebf\u9875\u9762",value:2}]),St=function(){var e=Object(Ce.g)(),t=Object(l.useMemo)((function(){var t=ae.b.userinfo.ORG_ID;return Tt.a.parse(e.search).OrgId||t}),[e.search]),a=Object(l.useState)({}),n=Object(s.a)(a,2),i=n[0],c=n[1],o=function(){ee.a["home/getOneDetail"]({OrgId:t}).then((function(e){e&&c(e)}))};Object(l.useEffect)((function(){o();var e=setInterval((function(){o()}),5e3);return function(){return clearInterval(e)}}),[t]);var r=Object(l.useState)(1),u=Object(s.a)(r,2),d=u[0],j=u[1],O=i.Name,m=i.IsOnline,f=void 0===m||m,h=i.Vars,v=void 0===h?[]:h;return Object(b.jsxs)("div",{className:"paper-monitor",children:[Object(b.jsxs)("div",{className:"paper-monitor__sider",children:[Object(b.jsxs)("div",{className:"paper-monitor__machine",children:[Object(b.jsxs)("div",{className:"paper-monitor__machine-item border-bottom",children:[Object(b.jsx)("div",{className:"display-flex flex-1 lineheight-1",children:O}),Object(b.jsx)(bt,{status:f?ee.b["PAPERMONITOR/MACHINE_ONLINE"]:ee.b["PAPERMONITOR/MACHINE_OFFLINE"]})]}),Object(b.jsx)(At.Scrollbars,{autoHide:!0,autoHeight:!0,autoHeightMax:"65vh",autoHideTimeout:1e3,autoHideDuration:200,children:v.map((function(e,t){return Object(b.jsxs)("div",{className:"paper-monitor__machine-item lineheight-1 ".concat(t!==v.length-1?"border-bottom":""),children:[Object(b.jsxs)("div",{className:"display-flex flex-1 flex-rowfsc",children:[Object(b.jsx)(p,{type:e.Icon,size:40}),Object(b.jsx)("span",{className:"fz-18 pd-l24",children:e.Name})]}),Object(b.jsx)("span",{className:"fz-24",children:e.Value})]},"".concat(e.Name,"_").concat(t))}))})]}),Object(b.jsx)("div",{className:"paper-monitor__switch",children:Mt.map((function(e){return Object(b.jsx)("div",{onClick:function(){return j(e.value)},className:"paper-monitor__switch-item ".concat(e.value===d?"active":""),children:e.label},"".concat(e.label,"_").concat(e.value))}))})]}),Object(b.jsx)("div",{className:"paper-monitor__main",children:1===d?Object(b.jsx)(jt,{orgId:t,machine:i}):Object(b.jsx)(mt,{orgId:t})})]})},Pt=a(570),Dt=a(571),wt=a(554),Lt=a(24),Rt=a(23),Vt=["onopen","onmessage","onerror","onclose","newSocket"],zt=new function e(){Object(Rt.a)(this,e),Object($e.a)(this,"socket",void 0),Object($e.a)(this,"onopen",void 0),Object($e.a)(this,"onmessage",void 0),Object($e.a)(this,"onerror",void 0),Object($e.a)(this,"onclose",void 0),Object($e.a)(this,"reconnectTimer",void 0),this.socket=void 0,this.onopen=[],this.onmessage=[],this.onerror=[],this.onclose=[],this.reconnectTimer=-1},kt=function(){function e(t){Object(Rt.a)(this,e),Object($e.a)(this,"socket",void 0),Object($e.a)(this,"socketUrl",void 0),Object($e.a)(this,"autoReconnect",void 0),Object($e.a)(this,"reconnectInterval",void 0),Object($e.a)(this,"reconnectCount",void 0);var a=t.url,n=t.autoReconnect,i=void 0===n||n,c=t.reconnectInterval;this.socketUrl=a,this.autoReconnect=i,this.reconnectInterval=c,this.reconnectCount=1,clearTimeout(zt.reconnectTimer),this.constructorSocket()}return Object(Lt.a)(e,[{key:"constructorSocket",value:function(){var e=this;this.socket=zt.socket=new window.WebSocket(this.socketUrl),this.socket.onopen=function(){e.evalFuncs("onopen")},this.socket.onmessage=function(t){e.evalFuncs("onmessage",t.data)},this.socket.onerror=function(t){console.error("socket error",t,(new Date).toLocaleString()),e.evalFuncs("onerror",t)},this.socket.onclose=function(t){console.error("socket close",t.code,t.reason,(new Date).toLocaleString()),e.evalFuncs("onclose",t.code,t.reason),console.error("socket reconnect",e.autoReconnect),e.autoReconnect&&e.reconnect()}}},{key:"evalFuncs",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var i=zt[e].filter((function(e){return!!e}));Array.isArray(i)&&i.forEach((function(e){return e instanceof Function&&e.apply(void 0,a)}))}},{key:"generateInterval",value:function(e){return this.reconnectInterval||1e3*Math.min(30,Math.pow(2,e)-1)}},{key:"reconnect",value:function(){var e=this;zt.reconnectTimer=setTimeout((function(){e.reconnectCount++,e.constructorSocket()}),this.generateInterval(this.reconnectCount))}}]),e}(),Ft=function(){function e(t){var a,n;Object(Rt.a)(this,e),Object($e.a)(this,"socket",void 0),Object($e.a)(this,"socketEvtIndex",void 0);var i=t.onopen,c=t.onmessage,r=t.onerror,s=t.onclose,l=t.newSocket,u=void 0!==l&&l,d=Object(wt.a)(t,Vt),b=void 0;zt.socket&&!u||(b=new kt(Object(o.a)({},d))),this.socket=(null===(a=b)||void 0===a?void 0:a.socket)||zt.socket,zt.onopen.push(i),zt.onmessage.push(c),zt.onerror.push(r),zt.onclose.push(s),this.socketEvtIndex=zt.onopen.length-1,1===(null===(n=this.socket)||void 0===n?void 0:n.readyState)&&i instanceof Function&&Promise.resolve().then((function(){i()}))}return Object(Lt.a)(e,[{key:"send",value:function(e){this.socket&&this.socket.send(e)}},{key:"close",value:function(){-1!==this.socketEvtIndex&&(zt.onopen.splice(this.socketEvtIndex,1,void 0),zt.onmessage.splice(this.socketEvtIndex,1,void 0),zt.onerror.splice(this.socketEvtIndex,1,void 0),zt.onclose.splice(this.socketEvtIndex,1,void 0))}}]),e}(),Yt=(a(536),Object(i.a)((function(){var e=Object(Ce.g)(),t=Object(l.useMemo)((function(){var t=ae.b.userinfo.ORG_ID;return Tt.a.parse(e.search).OrgId||t}),[e.search]),n=Object(l.useState)({}),i=Object(s.a)(n,2),r=i[0],j=i[1],O=function(){ee.a["controlmonitor/getGroupInfo"]({OrgId:t}).then((function(e){e&&j(e)})).finally((function(){ae.c.setGroupChangeStatus(!0)}))};Object(l.useEffect)((function(){O()}),[]);var f=Object(l.useMemo)((function(){return r.Controllers||[]}),[r]),h=Object(l.useState)(""),v=Object(s.a)(h,2),x=v[0],g=v[1];Object(l.useEffect)((function(){var e;r.Controllers&&g((null===(e=r.Controllers[0])||void 0===e?void 0:e.Id)||"")}),[r]);var I=function(e){return!x&&e&&Se.b.error("\u8bf7\u9009\u62e9\u63a7\u5236\u5668"),!x},N=y(x),C=Object(l.useState)({}),A=Object(s.a)(C,2),E=A[0],M=A[1],S=function(){I()||ee.a["controlmonitor/getControllerInfo"]({ControllerId:x}).then((function(e){e&&(M(e),V(Object(d.pick)(e,["Status","StatusInfo","MidStatus","MidStatusInfo"])))}))};Object(l.useEffect)((function(){S()}),[x]);var P=Object(l.useState)({}),w=Object(s.a)(P,2),R=w[0],V=w[1],z=Object(l.useRef)(-1);Object(l.useEffect)((function(){return z.current=setInterval((function(){I()||ee.a["controlmonitor/getControllerStatus"]({ControllerId:x}).then((function(e){e&&V((function(t){return Object(d.isEqual)(t,e)?t:e}))}))}),5e3),function(){return clearInterval(z.current)}}),[x]);var k=Object(l.useMemo)((function(){var e=E.CVList,t=void 0===e?[]:e,a=E.MVList;return{cvList:t,mvList:void 0===a?[]:a}}),[E]),Y=Object(l.useState)({MeasuringObjectId:"",ActuatorId:""}),W=Object(s.a)(Y,2),U=W[0],H=W[1];Object(l.useEffect)((function(){var e,t,a={MeasuringObjectId:"",ActuatorId:""};(null===(e=k.cvList[0])||void 0===e?void 0:e.Id)&&(a.MeasuringObjectId=k.cvList[0].Id),(null===(t=k.mvList[0])||void 0===t?void 0:t.Id)&&(a.ActuatorId=k.mvList[0].Id),H(a)}),[k]);var G=function(e){var t=U.MeasuringObjectId,a=U.ActuatorId;return!t&&e&&Se.b.error("\u8bf7\u9009\u62e9\u6d4b\u91cf\u5bf9\u8c61"),!a&&e&&Se.b.error("\u8bf7\u9009\u62e9\u6267\u884c\u5668"),!t||!a},Q=Object(l.useState)({MeasuringObject:{},Actuator:{}}),K=Object(s.a)(Q,2),X=K[0],$=K[1],te=function(){I()||G()||ee.a["controlmonitor/getPositionData"](Object(o.a)({ControllerId:x},U)).then((function(e){e&&$((function(t){return Object(d.isEqual)(t,e)?t:e}))}))},ne=Object(l.useRef)(-1);Object(l.useEffect)((function(){return te(),ne.current=setInterval((function(){te()}),5e3),function(){return clearInterval(ne.current)}}),[x,U]);var ie=Object(l.useState)(0),ce=Object(s.a)(ie,2),oe=ce[0],re=ce[1],se=Object(l.useState)(),le=Object(s.a)(se,2),ue=le[0],de=le[1],be=Object(l.useMemo)((function(){var e=X.MeasuringObject.PositionNumbers;return(void 0===e?[]:e).find((function(e){return e.PositionNumber===(null===ue||void 0===ue?void 0:ue.AlignPositionNumber)}))}),[X,ue]),je=Object(l.useState)(0),Oe=Object(s.a)(je,2),me=Oe[0],he=Oe[1],ve=Object(l.useState)(0),xe=Object(s.a)(ve,2),pe=xe[0],ge=xe[1];Object(l.useEffect)((function(){r.LeavingSeconds&&ge(r.LeavingSeconds)}),[r]);var Ie=function(e,t,a){return I(!0)?Promise.reject(!1):ee.a["controlmonitor/updateControllerEnableOption"]({ControllerId:x,Type:t,Value:e}).then((function(e){e&&!a&&Se.b.success("\u64cd\u4f5c\u6210\u529f")}))},Ne=Object(l.useRef)(),ye=Object(l.useState)(!1),Ae=Object(s.a)(ye,2),Te=Ae[0],Pe=Ae[1];Object(l.useEffect)((function(){return Object(Be.q)((function(){return ae.c.groupChangeDone}),(function(e){Pe(!e)}))}),[]);var De=Object(l.useState)(!1),we=Object(s.a)(De,2),Re=we[0],ze=we[1],ke=Object(l.useRef)(-1);Object(l.useEffect)((function(){clearTimeout(ke.current)}),[]);var Fe=Object(l.useRef)();Object(l.useEffect)((function(){return Fe.current=new Ft({url:Object(fe.c)(),onmessage:function(e){if(e){var t=JSON.parse(e),a=t.TypeCode,n=t.Data;switch(a){case ee.b["SOCKET/ACTUATOR_WRITE"]:(null===n||void 0===n?void 0:n.ControllerId)===N.current&&(ze(n),clearTimeout(ke.current),ke.current=setTimeout((function(){ze(!1)}),3e3));break;case ee.b["SOCKET/PAGE_REFRESH"]:O()}}}}),function(){Fe.current&&Fe.current.close()}}),[]);var Ye=Object(l.useState)([]),He=Object(s.a)(Ye,2),Ge=He[0],qe=He[1],Qe=Object(l.useState)(!1),Ke=Object(s.a)(Qe,2),Je=Ke[0],Xe=Ke[1],et=function(e,t){I(!0)||G(!0)||("all"!==t?Ge.length?ee.a["controlmonitor/openOrCloseLoop"](Object(o.a)(Object(o.a)({},U),{},{ControllerId:x,IsClose:e,PositionNumbers:Ge})).then((function(e){e&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),te())})):Se.b.error("\u6ca1\u6709\u9009\u4e2d\u4f4d\u53f7\u6570\u636e"):ee.a["controlmonitor/openOrCloseAllLoop"](Object(o.a)(Object(o.a)({},U),{},{ControllerId:x,IsClose:e})).then((function(e){e&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),te())})))},tt=Object(l.useState)({}),at=Object(s.a)(tt,2),nt=at[0],it=at[1],ct=Object(l.useMemo)((function(){var e=Object(d.cloneDeep)(X.Actuator),t=e.PositionNumbers;return(void 0===t?[]:t).forEach((function(e){void 0!==nt[e.PositionNumber]&&(e.SetSPValue=nt[e.PositionNumber])})),e}),[nt,X.Actuator]),ot=function(e){if(!I(!0)){var t=f.find((function(e){return e.Id===x}));ee.a["controlmonitor/setStatus"]({Id:x,Name:t.Name,Cmd:e}).then((function(e){e&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),S())}))}},rt=function(e,t,a){I(!0)||ee.a["controlmonitor/updateControllerEnableOption"]({ControllerId:x,Type:t,Value:e}).then((function(t){t&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),M(Object(o.a)(Object(o.a)({},E),{},Object($e.a)({},a,e))))}))},st=Object(l.useMemo)((function(){var e=R.Status;return R.MidStatus!==ee.b["CONTROLMONITOR/CONTROL_MID_NONE"]||e!==ee.b["CONTROLMONITOR/CONTROL_CMD_STOP"]&&e!==ee.b["CONTROLMONITOR/CONTROL_CMD_WAIT_BEGIN"]}),[R]),lt=Object(l.useMemo)((function(){var e=R.Status;return R.MidStatus!==ee.b["CONTROLMONITOR/CONTROL_MID_NONE"]||e!==ee.b["CONTROLMONITOR/CONTROL_CMD_START"]}),[R]),ut=Object(l.useMemo)((function(){var e=R.Status,t=R.MidStatus,n=a(537).default;return t===ee.b["CONTROLMONITOR/CONTROL_MID_NONE"]&&e===ee.b["CONTROLMONITOR/CONTROL_CMD_START"]&&(n=a(538).default),Object(b.jsx)("img",{src:n,alt:""})}),[R]),dt=Object(l.useMemo)((function(){if(!Re)return null;var e=Re.IsSuccess,t=a(316).default,n="pd-l8 fz-14 color-".concat(e?"success":"error"," fontweight-bolder vertical-middle");return Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsx)("img",{src:t,alt:""}),Object(b.jsx)("span",{className:n,children:"\u5199\u5165".concat(e?"\u6210\u529f":"\u5931\u8d25")})]})}),[Re]),bt=Object(l.useMemo)((function(){var e=r.LeavingSeconds,t=void 0===e?0:e,a=Math.floor(t/60),n=t%60;return"".concat(a,"\u5206").concat(n,"\u79d2")}),[r]),jt=[{field:"PVValue",chartOption:{legend:{data:[{icon:"path://M0 0 H150 V12 H0 Z"}]},lineOption:{name:"\u5f53\u524d\u503c"}}},{field:"SnapPVValue",chartOption:{legend:{data:[{icon:"path://M0 0 H150 V12 H0 Z"}]},lineOption:{name:"\u5feb\u7167\u503c"}}},{field:"SPValue",chartOption:{legend:{data:[{icon:"image://".concat(ht)}]},lineOption:{name:"\u76ee\u6807\u503c",lineStyle:{type:"dashed",color:"#bcbcbc"},areaStyle:{color:"rgba(0,0,0,0)"}}}}],Ot=Object(l.useMemo)((function(){var e=X.MeasuringObject.PositionNumbers,t=(void 0===e?[]:e).map((function(e){return e.PVValue})).filter((function(e){return e})),a=Math.max.apply(Math,Object(_e.a)(t));return{title:{top:40},grid:{top:60},xAxis:{axisLabel:{showMinLabel:!0,showMaxLabel:!0}},dataZoom:[{type:"slider",right:10,width:18,yAxisIndex:0,filterMode:"none",startValue:Math.min.apply(Math,Object(_e.a)(t))||0,endValue:a||void 0},{type:"inside",yAxisIndex:0,filterMode:"none"}]}}),[X.MeasuringObject]),mt=Object(l.useMemo)((function(){var e=ct.PositionNumbers,t=void 0===e?[]:e,a=13-2*Math.floor(t.length/50);return[{field:"SetSPValue",checkLoop:!0,chartOption:{legend:{data:[{icon:"image://".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAYCAYAAAC8/X7cAAAAsUlEQVRYhe3XsYkCQRiG4cfBzENsQmzBWOQKMLUGc8FcLMTYWMQCLEG4Bi481ALklw3MTFbnBuYpYPZ7l0mmM98vYIgNpuhr0bb32+Zx4YIjlvjpYoQTBm1/6U3iB88wwThhXdD4Z7F5nZprU6rv1Pad/7CvVPD4hxqQWw3IrQbkVgNyqwG51YDcakBuqXljluqWmgdyqQ4RsMJfgQGxeRUB53jdY4frPxj2SmyMrWOc74F/FoZed58lAAAAAElFTkSuQmCC")}]},barOption:{name:"\u624b\u52a8\u8bbe\u5b9aSP\u503c",barMaxWidth:a}}},{field:"PVValue",zeroToUndefined:!0,chartOption:{legend:{data:[{icon:"circle"}]},lineOption:{name:"\u5f53\u524dPV",symbol:"circle",symbolSize:6,lineStyle:{opacity:0},areaStyle:{color:"rgba(0,0,0,0)"}}}}]}),[ct]),ft=Object(l.useMemo)((function(){var e=ct.PositionNumbers,t=void 0===e?[]:e;return{title:{show:!1},legend:{itemWidth:24,itemHeight:12},xAxis:{maxInterval:Math.ceil(t.length/50),axisTick:{show:!1}}}}),[ct]);return Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsxs)("div",{className:"control-monitor",children:[Object(b.jsxs)("div",{className:"control-monitor__header",children:[Object(b.jsxs)("div",{className:"control-monitor__header-form",children:[Object(b.jsxs)(J.a,{layout:"inline",children:[Object(b.jsx)(J.a.Item,{label:"\u63a7\u5236\u5668\u7ec4",children:Object(b.jsx)(Me.a,{disabled:!0,value:r.GroupName,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u63a7\u5236\u5668",children:Object(b.jsx)(L.a,{fieldNames:{label:"Name",value:"Id"},options:f,value:x,onChange:g,style:{width:120}})}),Object(b.jsx)(J.a.Item,{label:"\u4ea7\u54c1\u6279\u53f7",children:Object(b.jsx)(Me.a,{disabled:!0,value:r.LotNumber,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u626b\u63cf\u5468\u671f",children:Object(b.jsx)(Me.a,{disabled:!0,value:E.ScanCycle,addonAfter:E.CycleUnit,className:"control-monitor__form-input"})})]}),Object(b.jsxs)("div",{className:"control-monitor__header-gif",children:[Re?dt:ut,Object(b.jsx)("div",{children:Object(b.jsx)("span",{children:R.MidStatusInfo})})]}),Object(b.jsx)(c.a,{type:"primary",disabled:st,onClick:function(){return ot(ee.b["CONTROLMONITOR/CONTROL_CMD_START"])},className:"mg-r8",children:"\u542f\u52a8"}),Object(b.jsx)(c.a,{danger:!0,disabled:lt,onClick:function(){return ot(ee.b["CONTROLMONITOR/CONTROL_CMD_STOP"])},className:"mg-l8",children:"\u505c\u6b62"})]}),Object(b.jsxs)("div",{className:"control-monitor__header-group",children:[Object(b.jsx)(Ee.a,{checked:E.IsSemiClosedLoop,onChange:function(e){return rt(e.target.checked,ee.b["CONTROLMONITOR/IS_SEMI_CLOSED_LOOP"],"IsSemiClosedLoop")},children:"\u534a\u95ed\u73af"}),Object(b.jsx)(Ee.a,{checked:r.IsAutoChangeGroup,onChange:function(e){return Ie(e.target.checked,ee.b["CONTROLMONITOR/IS_AUTO_CHANGE_GROUP"])},children:"\u81ea\u52a8\u7ec4\u5207\u6362"}),Object(b.jsx)(Ee.a,{checked:E.IsDCS,onChange:function(e){return rt(e.target.checked,ee.b["CONTROLMONITOR/IS_DCS"],"IsDCS")},children:"DCS"}),Object(b.jsx)(Ee.a,{checked:E.IsDebug,onChange:function(e){return rt(e.target.checked,ee.b["CONTROLMONITOR/IS_DEBUG"],"IsDebug")},children:"\u8c03\u8bd5"})]}),Object(b.jsxs)("div",{className:"control-monitor__header-control",children:[Object(b.jsx)(Ee.a,{checked:E.IsAutoInit,onChange:function(e){return rt(e.target.checked,ee.b["CONTROLMONITOR/IS_AUTO_INIT"],"IsAutoInit")},children:"\u81ea\u52a8"}),Object(b.jsx)(c.a,{type:"primary",disabled:E.IsAutoInit,onClick:function(){return ot(ee.b["CONTROLMONITOR/CONTROL_CMD_INIT"])},children:"\u521d\u59cb\u5316"}),Object(b.jsx)(D.a,{type:"vertical"}),Object(b.jsx)(m,{title:"\u529f\u80fd\u914d\u7f6e",width:"50%",slot:Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(q.a,{}),children:"\u914d\u7f6e"}),children:Object(b.jsx)(We,{group:r,controlDetail:E,counter:me,onGroupSwitch:function(e){var t=e.leftTime,a=e.targetGroup,n=e.targetTimes,i=e.timeType,c=function(){Ne.current=a,ge(t),Se.b.success("\u5c06\u5728".concat(n).concat("seconds"===i?"\u79d2":"minutes"===i?"\u5206\u949f":"\u5c0f\u65f6","\u540e\u8fdb\u884c\u7ec4\u5207\u6362"))};r.IsAutoChangeGroup?Ie(!1,ee.b["CONTROLMONITOR/IS_AUTO_CHANGE_GROUP"],!0).then((function(){c()})):c()},onSuccess:S})})]})]}),Object(b.jsxs)(B,{collapse:Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u5bf9\u9f50\u4f4d\u53f7",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===ue||void 0===ue?void 0:ue.AlignPositionNumber,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u76ee\u6807",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===be||void 0===be?void 0:be.SPValue,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524d\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===be||void 0===be?void 0:be.PVValue,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u6700\u5927\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.MeasuringObject.MaxValue,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u6700\u5c0f\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.MeasuringObject.MinValue,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.MeasuringObject.CoordinateMax,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.MeasuringObject.CoordinateMin,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"2\u03c3",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.MeasuringObject.TwoSigma,className:"control-monitor__form-input"})})]}),Object(b.jsxs)("div",{className:"mg-t20 text-center",children:[Object(b.jsx)(m,{title:"\u6d4b\u91cf\u76ee\u6807\u504f\u7f6e",width:"400px",slot:Object(b.jsx)(c.a,{type:"primary",className:"mg-r16",children:"\u6d4b\u91cf\u76ee\u6807\u504f\u7f6e"}),children:Object(b.jsx)(Le,{controlId:x,mesuringObjectId:U.MeasuringObjectId,onSuccess:S})}),Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Ue.a,{}),onClick:function(){I(!0)||G(!0)||ee.a["controlmonitor/saveMeasuringObjectSnapshot"]({Id:U.MeasuringObjectId}).then((function(e){e&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),te())}))},children:"\u5feb\u7167"})]})]}),onChange:Xe,zoneClass:"border-top",zoneStyle:{top:-1},zoneRightClass:"pd-t12",children:[Object(b.jsxs)(J.a,{layout:"inline",className:"pd-l12 pd-t12 mg-b6",children:[Object(b.jsx)(J.a.Item,{label:"CD\u6d4b\u91cf\u5bf9\u8c61",children:Object(b.jsx)(L.a,{fieldNames:{label:"Name",value:"Id"},options:k.cvList,value:U.MeasuringObjectId,onChange:function(e){return H(Object(o.a)(Object(o.a)({},U),{},{MeasuringObjectId:e}))},style:{width:240}})}),Object(b.jsx)(J.a.Item,{label:"CD\u6267\u884c\u5668",children:Object(b.jsx)(L.a,{fieldNames:{label:"Name",value:"Id"},options:k.mvList,value:U.ActuatorId,onChange:function(e){return H(Object(o.a)(Object(o.a)({},U),{},{ActuatorId:e}))},style:{width:240}})}),Object(b.jsx)(J.a.Item,{label:"\u63a7\u5236\u6a21\u5f0f",children:Object(b.jsx)(Me.a,{disabled:!0,value:"CD",className:"control-monitor__form-input--xl"})})]}),Object(b.jsx)(Ze,{timeVisible:!0,slider:null===ue||void 0===ue?void 0:ue.AlignPositionNumber,sliderVisible:!1,chartData:X.MeasuringObject,chartOption:Ot,chartHeight:340,seriesData:jt})]}),Object(b.jsxs)(B,{showHandler:!1,visible:Je,collapse:Object(b.jsxs)(J.a,{layout:"horizontal",labelCol:{span:10},wrapperCol:{span:14},children:[Object(b.jsx)(J.a.Item,{label:"\u4f4d\u53f7",children:Object(b.jsx)(Z.a,{value:oe,onChange:re,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5bf9\u9f50\u6d4b\u91cf\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===ue||void 0===ue?void 0:ue.AlignValue,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524dSP",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===ue||void 0===ue?void 0:ue.SPValue,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u624b\u52a8\u8bbe\u5b9aSP",children:Object(b.jsx)(Z.a,{value:null===ue||void 0===ue?void 0:ue.SetSPValue,onChange:function(e){var t=X.Actuator.PositionNumbers,a=(void 0===t?[]:t).find((function(e){return e.PositionNumber===oe}));a&&it(Object(o.a)(Object(o.a)({},nt),{},Object($e.a)({},a.PositionNumber,e)))},className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5f53\u524dPV",children:Object(b.jsx)(Z.a,{disabled:!0,value:null===ue||void 0===ue?void 0:ue.PVValue,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u6700\u5927\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.Actuator.MaxValue,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u6700\u5c0f\u503c",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.Actuator.MinValue,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0a\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.Actuator.CoordinateMax,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u5750\u6807\u4e0b\u754c",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.Actuator.CoordinateMin,className:"control-monitor__form-input"})}),Object(b.jsx)(J.a.Item,{label:"2\u03c3",children:Object(b.jsx)(Z.a,{disabled:!0,value:X.Actuator.TwoSigma,className:"control-monitor__form-input"})})]}),zoneStyle:{top:-1},zoneRightClass:"border-top pd-t12",children:[Object(b.jsx)(Ze,{checkboxVisible:!0,slider:oe,chartData:ct,alignChartData:X.MeasuringObject,chartOption:ft,chartHeight:310,seriesData:mt,onChange:re,onChartChange:de,onCheckedChange:qe}),Object(b.jsxs)("div",{className:"control-monitor__btn-group",children:[Object(b.jsx)(c.a,{icon:Object(b.jsx)(p,{type:"icon-bihuanchuzhi",className:"pd-r8"}),onClick:function(){return et(!0,"checked")},children:"\u9009\u4e2d\u95ed\u73af"}),Object(b.jsx)(c.a,{icon:Object(b.jsx)(p,{type:"icon-kaihuan",className:"pd-r8"}),onClick:function(){return et(!1,"checked")},children:"\u9009\u4e2d\u5f00\u73af"}),Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(p,{type:"icon-xieru",className:"pd-r8"}),onClick:function(){if(!I(!0)&&!G(!0)){var e=ct.PositionNumbers,t=void 0===e?[]:e;ee.a["controlmonitor/writeSetSPValue"]({ActuatorId:U.ActuatorId,ControllerId:x,PositionNumbers:t.map((function(e){return{PositionNumber:e.PositionNumber,SPValue:e.SetSPValue}}))}).then((function(e){e&&Se.b.success("\u64cd\u4f5c\u6210\u529f")}))}},children:"\u5199\u5165"}),Object(b.jsx)(m,{title:"SP\u503c\u5bfc\u5165",width:"400px",slot:Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Pt.a,{}),children:"\u5bfc\u5165"}),slotClass:"mg-l18 mg-r18",children:Object(b.jsx)(Ve,{controlId:x,actuatorId:U.ActuatorId,onSuccess:S})}),Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Dt.a,{}),onClick:function(){if(!I(!0)&&!G(!0)){var e=ae.b.headers.Tenant,t="CFG/ControllerMonitor/ExportSPValue",a="".concat(Object(fe.a)(t),"/").concat(t,"?ActuatorId=").concat(U.ActuatorId,"&ControllerId=").concat(x,"&tenant=").concat(e);window.open(a,"_blank")}},children:"\u5bfc\u51fa"}),Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Ue.a,{}),onClick:function(){I(!0)||G(!0)||ee.a["controlmonitor/saveActuatorSnapshot"]({Id:U.ActuatorId}).then((function(e){e&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),te())}))},children:"\u5feb\u7167"}),Object(b.jsxs)("div",{className:"control-monitor__btn-group--full",children:[Object(b.jsx)(c.a,{onClick:function(){return et(!0,"all")},children:"\u5168\u95ed\u73af"}),Object(b.jsx)(c.a,{onClick:function(){return et(!1,"all")},children:"\u5168\u5f00\u73af"})]})]})]}),Object(b.jsxs)("div",{className:"control-monitor__footer",children:[Object(b.jsxs)("div",{className:"control-monitor__footer-left",children:[r.IsOnline?Object(b.jsxs)("div",{className:"display-flex",children:[Object(b.jsx)("i",{className:"status fine"}),Object(b.jsx)("span",{children:"\u6b63\u5e38"})]}):Object(b.jsxs)("div",{className:"display-flex",children:[Object(b.jsx)("i",{className:"status error"}),Object(b.jsx)("span",{children:"\u5f02\u5e38"})]}),Object(b.jsx)(_,{extraFont:"\u5f53\u524d\u65f6\u95f4\uff1a",className:"mg-l30"}),Object(b.jsxs)("span",{className:"mg-l30",children:["\u7528\u6237\u540d\uff1a",ae.b.userinfo.NAME]}),Object(b.jsx)("span",{className:"mg-l30",children:"\u7528\u6237\u7c7b\u578b\uff1a\u9ad8\u7ea7\u5de5\u7a0b\u5e08"})]}),Object(b.jsxs)("div",{className:"control-monitor__footer-right",children:[Object(b.jsxs)("span",{children:["\u5f53\u524d\u7ec4\u5269\u4f59\u65f6\u95f4\uff1a",bt]}),Object(b.jsxs)("span",{className:"mg-l30",children:["\u76ee\u6807\u7ec4\u5207\u6362\u65f6\u95f4\uff1a",r.TargetGroupChangeTime]}),Object(b.jsx)(T,{extraFont:"\u7ec4\u5207\u6362\u5012\u8ba1\u65f6\uff1a",seconds:pe,onCountChange:he,onCountDone:function(){if(Se.b.success("\u6b63\u5728\u4e3a\u60a8\u5207\u6362\u7ec4\uff0c\u8bf7\u7a0d\u540e..."),clearInterval(z.current),clearInterval(ne.current),ae.c.setGroupChangeStatus(!1),Ne.current){var e=Ne.current;Ne.current=void 0,ee.a["controlmonitor/manualExchangeGroup"]({NewGroupId:e}).then((function(){Se.b.success("\u5207\u6362\u6210\u529f")})).catch((function(){Se.b.error("\u5207\u6362\u5931\u8d25")})).finally((function(){O()}))}},className:"mg-l30"})]})]})]}),Object(b.jsx)(F,{loading:Te})]})}))),Wt=(a(553),a(546)),Bt=a(252),Ut=(a(541),Wt.a.RangePicker),Ht=Ne.a.TabPane,Gt=function(e){var t=Object(l.useMemo)((function(){var t=e.controlDetail,a=t.MVList,n=void 0===a?[]:a,i=t.CVList;return{mvList:n,cvList:void 0===i?[]:i}}),[e.controlDetail]),a=Object(l.useState)([]),n=Object(s.a)(a,2),i=n[0],r=n[1],d=Object(l.useState)([]),j=Object(s.a)(d,2),O=j[0],m=j[1],f=Object(l.useMemo)((function(){switch(e.previewType){case ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]:return{mvList:t.mvList,cvList:O};case ee.b["DATAPREVIEW/PREVIEW_TYPE_MEASURE"]:return{mvList:i,cvList:t.cvList};default:return t}}),[e.previewType,t,i,O]),h=Object(l.useState)({ActuatorId:[],MeasuringObjectId:[]}),v=Object(s.a)(h,2),x=v[0],p=v[1];Object(l.useEffect)((function(){var a={ActuatorId:[],MeasuringObjectId:[]};switch(e.previewType){case ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]:var n,i=null===(n=t.mvList[0])||void 0===n?void 0:n.Id;i&&(a.ActuatorId.push(i),ee.a["datapreview/getMeasuringObjectListByActuator"]({ControllerId:e.controlDetail.Id,ActuatorId:i}).then((function(e){e&&Array.isArray(e)&&(e.forEach((function(e){a.MeasuringObjectId.push(e.Id)})),m(e),p(a))})));break;case ee.b["DATAPREVIEW/PREVIEW_TYPE_MEASURE"]:var c,o=null===(c=t.cvList[0])||void 0===c?void 0:c.Id;o&&(a.MeasuringObjectId.push(o),ee.a["datapreview/getActuatorListByMeasuringObject"]({ControllerId:e.controlDetail.Id,MeasuringObjectId:o}).then((function(e){e&&Array.isArray(e)&&(e.forEach((function(e){a.ActuatorId.push(e.Id)})),r(e),p(a))})))}}),[e.previewType,e.controlDetail,t]),Object(l.useEffect)((function(){e.onFilterChange(x)}),[x]);var g=Object(l.useState)(""),I=Object(s.a)(g,2),_=I[0],N=I[1];Object(l.useEffect)((function(){ee.c.emit(ee.b["DATAPREVIEW/EVT_CMDPREVIEW"],_)}),[_]);var C=Object(l.useMemo)((function(){var t=function(){e.previewType!==ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?ee.a["datapreview/setSnapshotByMeasuringObject"]({ControllerId:e.controlDetail.Id,ActuatorIds:x.ActuatorId,MeasuringObjectId:x.MeasuringObjectId[0]}).then((function(e){e&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),ee.c.emit(ee.b["DATAPREVIEW/EVT_SNAPSHOT"]))})):ee.a["datapreview/setSnapshotByActuator"]({ControllerId:e.controlDetail.Id,ActuatorId:x.ActuatorId[0],MeasuringObjectIds:x.MeasuringObjectId}).then((function(e){e&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),ee.c.emit(ee.b["DATAPREVIEW/EVT_SNAPSHOT"]))}))},a=function(){};switch(e.previewType){case ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]:return"realtime-data"===e.currTab?Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Ue.a,{}),onClick:t,children:"\u5feb\u7167"}):"history-data"===e.currTab?Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsx)(c.a,{type:_===ee.b["DATAPREVIEW/PREVIEW_TYPE_CD"]?"primary":"default",onClick:function(){return N(ee.b["DATAPREVIEW/PREVIEW_TYPE_CD"])},children:"CD\u9884\u89c8"}),Object(b.jsx)(c.a,{type:_===ee.b["DATAPREVIEW/PREVIEW_TYPE_MD"]?"primary":"default",onClick:function(){return N(ee.b["DATAPREVIEW/PREVIEW_TYPE_MD"])},className:"mg-l8",children:"MD\u9884\u89c8"}),_?Object(b.jsx)(c.a,{type:"primary",onClick:function(){return N("")},className:"mg-l8",children:"\u8fd4\u56de"}):null]}):null;case ee.b["DATAPREVIEW/PREVIEW_TYPE_MEASURE"]:return"realtime-data"===e.currTab?Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Ue.a,{}),onClick:t,children:"\u5feb\u7167"}),Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Ue.a,{}),onClick:a,className:"mg-l8",children:"\u5bfc\u51fa"})]}):"history-data"===e.currTab?Object(b.jsxs)(u.a.Fragment,{children:[Object(b.jsx)(c.a,{type:_===ee.b["DATAPREVIEW/PREVIEW_TYPE_CD"]?"primary":"default",onClick:function(){return N(ee.b["DATAPREVIEW/PREVIEW_TYPE_CD"])},children:"CD\u9884\u89c8"}),Object(b.jsx)(c.a,{type:_===ee.b["DATAPREVIEW/PREVIEW_TYPE_MD"]?"primary":"default",onClick:function(){return N(ee.b["DATAPREVIEW/PREVIEW_TYPE_MD"])},className:"mg-l8",children:"MD\u9884\u89c8"}),_?Object(b.jsx)(c.a,{type:"primary",onClick:function(){return N("")},className:"mg-l8",children:"\u8fd4\u56de"}):null,Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Ue.a,{}),onClick:a,className:"mg-l8",children:"\u5bfc\u51fa"})]}):Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Ue.a,{}),onClick:a,children:"\u5bfc\u51fa"});default:return null}}),[e.currTab,e.previewType,e.controlDetail,x,_]);return Object(b.jsxs)(J.a,{layout:"inline",children:[Object(b.jsx)(J.a.Item,{label:"CD\u6267\u884c\u5668",children:Object(b.jsx)(L.a,{mode:e.previewType===ee.b["DATAPREVIEW/PREVIEW_TYPE_MEASURE"]?"multiple":void 0,maxTagCount:1,fieldNames:{label:"Name",value:"Id"},options:f.mvList,value:x.ActuatorId,onChange:function(e){return p(Object(o.a)(Object(o.a)({},x),{},{ActuatorId:e}))},style:{width:200}})}),Object(b.jsx)(J.a.Item,{label:"CD\u6d4b\u91cf\u5bf9\u8c61",children:Object(b.jsx)(L.a,{mode:e.previewType===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?"multiple":void 0,maxTagCount:1,fieldNames:{label:"Name",value:"Id"},options:f.cvList,value:x.MeasuringObjectId,onChange:function(e){return p(Object(o.a)(Object(o.a)({},x),{},{MeasuringObjectId:e}))},style:{width:200}})}),C]})},qt=Object(i.a)((function(){var e=Object(Ce.g)(),t=Object(l.useMemo)((function(){var t=ae.b.userinfo.ORG_ID;return Tt.a.parse(e.search).OrgId||t}),[e.search]),a=Object(l.useState)({}),n=Object(s.a)(a,2),i=n[0],o=n[1];Object(l.useEffect)((function(){ee.a["controlmonitor/getGroupInfo"]({OrgId:t}).then((function(e){e&&o(e)}))}),[]);var r=Object(l.useMemo)((function(){return i.Controllers||[]}),[i]),u=Object(l.useState)(""),j=Object(s.a)(u,2),O=j[0],m=j[1];Object(l.useEffect)((function(){var e;i.Controllers&&m((null===(e=i.Controllers[0])||void 0===e?void 0:e.Id)||"")}),[i]);var f=Object(l.useState)({}),h=Object(s.a)(f,2),v=h[0],x=h[1],g=function(){var e;(!O&&e&&Se.b.error("\u8bf7\u9009\u62e9\u63a7\u5236\u5668"),O)&&ee.a["datapreview/getControllerInfo"]({ControllerId:O}).then((function(e){e&&x(e)}))};Object(l.useEffect)((function(){g()}),[O]);var I=Object(l.useState)([ct()().subtract(10,"minutes"),ct()()]),_=Object(s.a)(I,2),N=_[0],C=_[1],y=Object(l.useState)(ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]),A=Object(s.a)(y,2),E=A[0],T=A[1],M=Object(l.useState)(),S=Object(s.a)(M,2),P=S[0],D=S[1],w=Object(l.useState)("realtime-data"),R=Object(s.a)(w,2),V=R[0],z=R[1];return Object(b.jsxs)("div",{className:"data-preview",children:[Object(b.jsxs)("div",{className:"data-preview__header",children:[Object(b.jsxs)("div",{className:"data-preview__header-form",children:[Object(b.jsxs)(J.a,{layout:"inline",children:[Object(b.jsx)(J.a.Item,{label:"\u63a7\u5236\u5668\u7ec4",children:Object(b.jsx)(Me.a,{disabled:!0,value:i.GroupName,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u63a7\u5236\u5668",children:Object(b.jsx)(L.a,{fieldNames:{label:"Name",value:"Id"},options:r,value:O,onChange:m,style:{width:120}})}),Object(b.jsx)(J.a.Item,{label:"\u4ea7\u54c1\u6279\u53f7",children:Object(b.jsx)(Me.a,{disabled:!0,value:i.LotNumber,className:"data-preview__form-input"})}),Object(b.jsx)(J.a.Item,{label:"\u626b\u63cf\u5468\u671f",children:Object(b.jsx)(Me.a,{disabled:!0,value:v.ScanCycle,addonAfter:v.CycleUnit,className:"data-preview__form-input"})})]}),Object(b.jsx)(c.a,{type:E===ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]?"primary":"default",icon:Object(b.jsx)(p,{type:"icon-PLCzhihangqi",className:"pd-r8"}),onClick:function(){T(ee.b["DATAPREVIEW/PREVIEW_TYPE_ACTUATOR"]),D(void 0)},className:"mg-r8",children:"\u6267\u884c\u5668\u9884\u89c8"}),Object(b.jsx)(c.a,{type:E===ee.b["DATAPREVIEW/PREVIEW_TYPE_MEASURE"]?"primary":"default",icon:Object(b.jsx)(p,{type:"icon-celiang",className:"pd-r8"}),onClick:function(){T(ee.b["DATAPREVIEW/PREVIEW_TYPE_MEASURE"]),D(void 0)},className:"mg-l8",children:"\u6d4b\u91cf\u5bf9\u8c61\u9884\u89c8"})]}),"realtime-data"!==V?Object(b.jsx)("div",{className:"data-preview__header-form",children:Object(b.jsxs)(J.a,{layout:"inline",children:[Object(b.jsx)(J.a.Item,{label:"\u9009\u62e9\u65f6\u95f4",children:Object(b.jsx)(Ut,{allowClear:!1,showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",value:N,onChange:function(e){e=[ct()(e[0].format("YYYY-MM-DD HH:mm")),ct()(e[1].format("YYYY-MM-DD HH:mm"))];var t=Object(d.cloneDeep)(e),a=t[1].isSame(t[0]),n=t[1].isAfter(t[0].add(1,"hours"));if(a||n)return n&&Se.b.warning("\u53ea\u80fd\u67e5\u8be21\u5c0f\u65f6\u533a\u95f4\u6bb5\u7684\u6570\u636e"),void C([e[0],Object(d.cloneDeep)(e[0]).add(10,"minutes")]);C(e)},style:{width:300}})}),Object(b.jsx)(J.a.Item,{label:"",children:Object(b.jsx)(c.a,{type:"primary",icon:Object(b.jsx)(Bt.a,{}),loading:ae.d.visible,onClick:function(){return C(Object(_e.a)(N))},children:"\u67e5\u8be2"})})]})}):null]}),Object(b.jsx)("div",{className:"data-preview__tabs",children:Object(b.jsxs)(Ne.a,{animated:!1,activeKey:V,onChange:z,tabBarExtraContent:Object(b.jsx)(Gt,{currTab:V,previewType:E,controlDetail:v,onFilterChange:D}),children:[Object(b.jsx)(Ht,{tab:"\u5b9e\u65f6\u6570\u636e",children:Object(b.jsx)(at,{previewType:E,filter:P,controlId:O})},"realtime-data"),Object(b.jsx)(Ht,{tab:"\u5386\u53f2\u6570\u636e",children:Object(b.jsx)(dt,{previewType:E,filter:P,controlId:O,timeRange:N})},"history-data"),Object(b.jsx)(Ht,{tab:"\u5e73\u5747\u6570\u636e",children:Object(b.jsx)(st,{previewType:E,filter:P,controlId:O,timeRange:N})},"average-data"),Object(b.jsx)(Ht,{tab:"2\u03c3\u6570\u636e",children:Object(b.jsx)(lt,{previewType:E,filter:P,controlId:O,timeRange:N})},"xigema-data")]})})]})})),Qt=function(e){var t=Object(l.useMemo)((function(){return n[e.name]?n[e.name]:function(){return null}}),[e.name]);return Object(b.jsx)(t,{})},Zt=function(e){var t=Object(l.useContext)(Oa).selectedData[0],a=e.config,n=a.ICON,i=a.LABEL,c=a.FORM_CODE;return Object(b.jsx)(m,{width:"98%",title:(null===t||void 0===t?void 0:t.NAME)||(null===t||void 0===t?void 0:t.ALIAS)||(null===t||void 0===t?void 0:t.ID)||c,slot:Object(b.jsxs)("span",{children:[Object(b.jsx)(p,{type:n}),Object(b.jsx)("span",{className:"pd-l4",children:i})]}),children:Object(b.jsx)(ie,{formCode:c})})},Kt=(a(542),a(544)),Jt=a(551),Xt=function(e){var t=Object(l.useContext)(Oa),a=e.config.LABEL;return Object(b.jsx)(Kt.a,{title:"\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:function(){var a=t.selectedData[0],n=e.config.API_URL;n?ee.a["app/getDataByGet"]({id:null===a||void 0===a?void 0:a.ID},{url:"/".concat(n)}).then((function(e){e&&(t.reload(),Se.b.success("\u5220\u9664\u6210\u529f"))})):Se.b.error("\u672a\u914d\u7f6e\u5220\u9664API\u63a5\u53e3")},children:Object(b.jsxs)("span",{className:"color-error",children:[Object(b.jsx)(Jt.a,{className:"fz-16"}),Object(b.jsx)("span",{className:"pd-l4",children:a})]})})},$t=function(e){var t=Object(l.useContext)(ce),a=e.config,n=a.LABEL,i=a.CSS,o=a.ICON,r=a.FORM_CODE;return Object(b.jsx)(m,{width:"98%",slot:Object(b.jsx)(c.a,{type:i||"primary",icon:o,children:n}),afterClose:function(){t&&t.reload()},children:Object(b.jsx)(ie,{formCode:r})})},ea=function(e){var t=Object(l.useContext)(ve),a=Object(l.useContext)(Oa),n=Object(l.useContext)(j),i=e.config.LABEL;return Object(b.jsx)(c.a,{type:"primary",onClick:function(){var e,i=null===t||void 0===t||null===(e=t.verifyFormBase)||void 0===e?void 0:e.call(t);if(!i||!Object.entries(i).map((function(e){var t=Object(s.a)(e,2);t[0];return t[1]})).filter((function(e){return!!e})).length){var c=t.formState.Nav_PageEdit.Nav_PageEdit;if(c.API_URL){var r=ae.b.userinfo.ORG_ID;ee.a["app/getDataByPost"](Object(o.a)({ORG_ID:r},t.formBase),{url:"/".concat(c.API_URL)}).then((function(e){e&&(Se.b.success("\u64cd\u4f5c\u6210\u529f"),a&&a.reload(),n&&n.close())}))}else Se.b.error("\u672a\u914d\u7f6e\u5bf9\u5e94\u63a5\u53e3\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e")}},children:i})},ta=a(552),aa=function(e){var t=e.config,a=t.LABEL,n=t.CSS;return Object(b.jsx)(c.a,{type:n||"primary",icon:Object(b.jsx)(ta.a,{}),children:a})},na=function(e){var t=e.config.BTN_TYPE,a=ea,n=aa;switch(t){case ee.b["TABLE/BTN_TYPE_SAVE"]:return Object(b.jsx)(a,{config:e.config});case ee.b["TABLE/BTN_TYPE_ADD"]:return Object(b.jsx)(n,{config:e.config});default:return Object(b.jsx)("div",{})}},ia=function(e){var t=e.config.BTN_TYPE,a=Zt,n=Xt,i=$t;switch(t){case ee.b["TABLE/BTN_TYPE_CUSTOM_MODAL"]:return Object(b.jsx)(a,{config:e.config});case ee.b["TABLE/BTN_TYPE_ADD"]:return Object(b.jsx)(i,{config:e.config});case ee.b["TABLE/BTN_TYPE_DELETE"]:return Object(b.jsx)(n,{config:e.config});case ee.b["TABLE/BTN_TYPE_EDIT"]:return Object(b.jsx)(a,{config:e.config});default:return Object(b.jsx)("div",{})}},ca=function(e){return e.pageType===ee.b["TABLE/FORM_TYPE_EDIT_PAGE"]?Object(b.jsx)(na,{config:e.config}):Object(b.jsx)(ia,{config:e.config})},oa=function(e){var t=Object(l.useContext)(ve),a=Object(l.useMemo)((function(){var a=e.config.FIELD_NAME;return Object(d.get)(null===t||void 0===t?void 0:t.formBase,a)}),[t,e.config]),n=e.evtConfig,i=void 0===n?{}:n,c=i.hidden,o=void 0!==c&&c,r=i.disabled,s=void 0!==r&&r;if(o)return null;var u=e.config,j=u.LABEL,O=u.REQUIRED;return Object(b.jsx)(J.a.Item,{label:j,required:O,validateStatus:e.verify?"error":void 0,children:Object(b.jsx)(Me.a,{disabled:s,value:a,onChange:function(t){var a=e.config.FIELD_NAME;e.onChange instanceof Function&&e.onChange(Object($e.a)({},a,t.target.value))}})})},ra=function(e){var t=Object(l.useContext)(ve),a=Object(l.useMemo)((function(){var a=e.config.FIELD_NAME;return Object(d.get)(null===t||void 0===t?void 0:t.formBase,a)}),[t,e.config]),n=e.evtConfig,i=void 0===n?{}:n,c=i.hidden,o=void 0!==c&&c,r=i.disabled,s=void 0!==r&&r;if(o)return null;var u=e.config,j=u.LABEL,O=u.REQUIRED;return Object(b.jsx)(J.a.Item,{label:j,required:O,validateStatus:e.verify?"error":void 0,children:Object(b.jsx)(Z.a,{disabled:s,value:a,onChange:function(t){var a=e.config.FIELD_NAME;e.onChange instanceof Function&&e.onChange(Object($e.a)({},a,t))},style:{width:"100%"}})})},sa=function(e){var t=Object(l.useState)([]),a=Object(s.a)(t,2),n=a[0],i=a[1],c=Object(l.useContext)(ve),r=Object(l.useMemo)((function(){var t=e.config.FIELD_NAME;return Object(d.get)(null===c||void 0===c?void 0:c.formBase,t)}),[c,e.config]),u=e.evtConfig,j=void 0===u?{}:u,O=j.hidden,m=void 0!==O&&O,f=j.disabled,h=void 0!==f&&f;if(m)return null;var v=e.config,x=v.LABEL,p=v.REQUIRED;return Object(b.jsx)(J.a.Item,{label:x,required:p,validateStatus:e.verify?"error":void 0,children:Object(b.jsx)(k,{value:r,remoteMethod:function(t){var a=e.config,n=a.INPUT_DATA_API,c=a.Nav_Filters;if(!n)return new Promise((function(e){e(!1)}));var o=t.current,r=t.search,s=t.initSearch,l=de({OrgId:ae.b.userinfo.ORG_ID,PageIndex:o}),u=[be("NAME",9,r)];return!r&&s&&u.push(be("ID",1,s)),Array.isArray(c)&&c.length&&c.forEach((function(e){u.push(be(e.FIELD_NAME,e.OPERATION,e.VALUE))})),je(l.FilterGroup,u),ee.a["app/getDataByPost"](l,{url:n,fullData:!0}).then((function(e){return e&&e.Data&&i(e.Data),e}))},onChange:function(t){var a=function(t){var a={},i=e.config,c=i.INPUT_NAV_FIELD,o=i.INPUT_SAVE_FIELD;if(c&&o){var r=n.find((function(e){return e.ID===t})),s=c.split(","),l=o.split(",");s.forEach((function(e,t){r&&r[e]&&(a[l[t]]=r[e])}))}return a}(t),i=e.config.FIELD_NAME;e.onChange instanceof Function&&e.onChange(Object(o.a)(Object($e.a)({},i,t),a))},selectProps:{allowClear:!0,disabled:h},style:{width:"100%"}})})},la=function(e){var t=Object(l.useContext)(ve),a=Object(l.useMemo)((function(){var a=e.config.FIELD_NAME;return Object(d.get)(null===t||void 0===t?void 0:t.formBase,a)}),[t,e.config]),n=e.evtConfig,i=void 0===n?{}:n,c=i.hidden,o=void 0!==c&&c,r=i.disabled,s=void 0!==r&&r;if(o)return null;var u=e.config,j=u.LABEL,O=u.REQUIRED;return Object(b.jsx)(J.a.Item,{label:j,required:O,validateStatus:e.verify?"error":void 0,children:Object(b.jsx)(ze.a,{disabled:s,checked:a,onChange:function(t){var a=e.config.FIELD_NAME;e.onChange instanceof Function&&e.onChange(Object($e.a)({},a,t))}})})},ua=function(e){var t=Object(l.useContext)(ve),a=Object(l.useState)({}),n=Object(s.a)(a,2),i=n[0],c=n[1];Object(l.useEffect)((function(){var t=function(t){t===e.config.FIELD_NAME&&c((function(e){return Object(o.a)(Object(o.a)({},e),{},{disabled:!0})}))},a=function(t){t===e.config.FIELD_NAME&&c((function(e){return Object(o.a)(Object(o.a)({},e),{},{disabled:!1})}))};return ee.c.addListener(ee.b["COMMON/EVT_DISABLE_CONTROL"],t),ee.c.addListener(ee.b["COMMON/EVT_ENABLE_CONTROL"],a),function(){ee.c.removeListener(ee.b["COMMON/EVT_DISABLE_CONTROL"],t),ee.c.removeListener(ee.b["COMMON/EVT_ENABLE_CONTROL"],a)}}),[e.config]);var r=Object(l.useState)(!1),u=Object(s.a)(r,2),d=u[0],j=u[1],O=function(a){var n=e.config.CHANGE_FUNC;if(t){var i=Object(o.a)(Object(o.a)({},t.formBase),a);t.setFormBase(i),j(he(e.config,i)),t.dynamicJs[n]instanceof Function&&t.dynamicJs[n](Object(o.a)(Object(o.a)({},t),{},{formBase:i}))}},m=Object(l.useMemo)((function(){var a,n,i=e.config.FIELD_NAME,c=null===t||void 0===t||null===(a=t.verify)||void 0===a?void 0:a[i];return!(null===t||void 0===t||null===(n=t.verifyWhiteList)||void 0===n?void 0:n.includes(i))&&c}),[t,e.config]);switch(Object(l.useEffect)((function(){j(m)}),[m]),e.config.CONTROL_TYPE){case ee.b["TABLE/CONTROL_TYPE_TEXTINPUT"]:return Object(b.jsx)(oa,{config:e.config,evtConfig:i,verify:d,onChange:O});case ee.b["TABLE/CONTROL_TYPE_SWITCH"]:return Object(b.jsx)(la,{config:e.config,evtConfig:i,verify:d,onChange:O});case ee.b["TABLE/CONTROL_TYPE_NUMBERINPUT"]:return Object(b.jsx)(ra,{config:e.config,evtConfig:i,verify:d,onChange:O});case ee.b["TABLE/CONTROL_TYPE_PAGINATION_SELECT"]:return Object(b.jsx)(sa,{config:e.config,evtConfig:i,verify:d,onChange:O});default:return Object(b.jsx)("div",{})}},da=function(e){var t=Object(l.useState)(),a=Object(s.a)(t,2),n=a[0],i=a[1];return Object(l.useEffect)((function(){!function(){var t=de({OrgId:ae.b.userinfo.ORG_ID,Keyword:e.formCode});ee.a["table/getTablePageTables"](t).then((function(e){e&&i(e)}))}()}),[]),n},ba=function(e){var t=function(e){e.Nav_Form;var t=e.Nav_Tables,a=ae.b.userinfo,n=a.ORG_ID,i=a.ID;Promise.all(t.map((function(e){return function(e){var t=de({OrgId:n,Sort:"NUM",Parameter1:i}),a=be("ID",1,e.ID);return je(t.FilterGroup,a),ee.a["table/getTablePageConfigInfo"](t)}(e)}))).then((function(e){c(e.filter((function(e){return e})))}))},a=Object(l.useState)(),n=Object(s.a)(a,2),i=n[0],c=n[1],o=da(e);return Object(l.useEffect)((function(){o&&t(o)}),[o]),i},ja=function(e,t){var a=function(e,t){var a=function(e){var t,a=e.Nav_Columns,n=void 0===a?[]:a,i=e.PageTable,c=e.RowBtns,o=[];return i.IS_SHOW_ROW_NO&&o.push({title:"\u5e8f\u53f7",key:"ROW_NO",dataIndex:"ROW_NO",width:80}),n.forEach((function(e){var t=e.IS_DEFAULT,a=e.LABEL,n=e.FIELD_NAME;t&&o.push({title:a,key:n,dataIndex:n,render:function(e,t){return se({record:t,field:n})}})})),o.concat((t=c,Array.isArray(t)&&t.length?[{title:Object(b.jsx)("span",{className:"mg-l6 mg-r4",children:"\u64cd\u4f5c"}),key:"operate-column",render:function(){return Object(b.jsx)("div",{className:"operate-column",children:t.map((function(e){return Object(b.jsx)("div",{className:"operate-column__btn",children:Object(b.jsx)(ca,{pageType:ee.b["TABLE/FORM_TYPE_LIST_PAGE"],config:e})},e.ID)}))})}}]:[]))},n=function(e){var a=e.Nav_Columns,n=void 0===a?[]:a,i=e.PageTable,c=e.TableParams,o=i.SORT,r=void 0===o?"CREATE_TIME":o,s=i.ORDER,l=void 0===s?i.SORT?i.ORDER:1:s,u=i.DefaultPageSize,d=i.NO_SELECT_FIELD,b=n.map((function(e){return e.FIELD_NAME})).filter((function(e){return"null"!==e}));b.length&&!d&&(-1===b.indexOf("ID")&&b.push("ID"),-1===b.indexOf("ORG_ID")&&b.push("ORG_ID"));var j=de({OrgId:ae.b.userinfo.ORG_ID,Sort:r,Order:l,Limit:u,SelectField:b}),O=[];return Array.isArray(c)&&c.length&&c.forEach((function(e){O.push({isCustom:e.IS_CUSTOM,isSysParam:e.IS_SYS_PARAM,field:e.FIELD_NAME,operator:e.OPERATION,value:e.VALUE})})),O.length&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.rules,n=t.groups,i=t.orgType,c=t.menuParameter;if(i&&(e.OrgType=i),c&&(e.MenuParameter=c),Array.isArray(a)&&a.length){a.filter((function(e){return e.isCustom})).forEach((function(t){var a=t.field,n=t.value;if(-1!==a.indexOf(",")){var i=a.split(","),c=n.toString().split(",");i.forEach((function(t,a){e[t]=c[a]}))}else e[a]=n}));var o=a.filter((function(e){return!e.isCustom})),r=[];o.forEach((function(e){var t=e.field,a=e.operator,n=e.value,i=e.isSysParam;r.push(be(t,a,n,i))})),je(e.FilterGroup,r)}if(Array.isArray(n)&&n.length){var s=[];n.forEach((function(e){s.push(Oe(e))})),me(e.FilterGroup,s)}}(j,{rules:O}),Object.assign(j,t)};return new Promise((function(t){var i=n(e),c=e.PageTable,o=[],r=0;ee.a["app/getDataByPost"](i,{url:c.API_URL,fullData:!0}).then((function(e){var t;(null===e||void 0===e?void 0:e.IsSuccessful)&&((null===e||void 0===e||null===(t=e.Data)||void 0===t?void 0:t.length)&&(c.IS_SHOW_ROW_NO&&e.Data.forEach((function(e,t){return e.ROW_NO=t+1})),o=e.Data,r=e.TotalCount))})).finally((function(){t({config:e,data:{columns:a(e),dataSource:o,dataTotal:r}})}))}))},n=Object(l.useState)(),i=Object(s.a)(n,2),c=i[0],o=i[1],r=ba(e);return Object(l.useEffect)((function(){r&&r.length&&Promise.all(r.map((function(e){return a(e,t)}))).then((function(e){o(e.filter((function(e){return e})))}))}),[r,t]),c},Oa=u.a.createContext(void 0),ma=function(e){var t=Object(l.useState)({columns:[],dataSource:[]}),a=Object(s.a)(t,2),n=a[0],i=a[1],c=Object(l.useState)(),r=Object(s.a)(c,2),u=r[0],j=r[1],O=Object(l.useState)({current:1,pageSize:10,total:0}),m=Object(s.a)(O,2),f=m[0],h=m[1],v=Object(l.useState)({PageIndex:1,Limit:10}),x=Object(s.a)(v,2),p=x[0],g=x[1];Object(l.useEffect)((function(){var e={PageIndex:f.current,Limit:f.pageSize};g((function(t){return Object(d.isEqual)(t,e)?t:e}))}),[f.current,f.pageSize]);var I=ja(e,p);Object(l.useEffect)((function(){if(I&&I.length){var t=I[0],a=t.data,n=t.config;i(Object(d.pick)(a,["columns","dataSource"])),j(n),h((function(e){if(e.total===a.dataTotal)return e;var t=e.current,n=e.pageSize;return{current:t*n>Math.ceil(a.dataTotal/n)*n?t-1:t,pageSize:n,total:a.dataTotal}})),e.onLoadedData instanceof Function&&e.onLoadedData(Object(d.cloneDeep)({data:a,config:n}))}}),[I]);var _=Object(l.useState)([]),N=Object(s.a)(_,2),C=N[0],y=N[1];Object(l.useEffect)((function(){y((function(t){return Object(d.isEqual)(t,e.selectedKeys)?t:e.selectedKeys}))}),[e.selectedKeys]);var A=Object(l.useState)({}),E=Object(s.a)(A,2),T=E[0],M=E[1];Object(l.useEffect)((function(){var e=n.dataSource.filter((function(e){return-1!==C.indexOf(e.ID)}));M((function(t){return Object(d.isEqual)(t,e)?t:e}))}),[n.dataSource,C]);var S=Object(l.useMemo)((function(){var t=e.radioEnable,a=e.checkboxEnable;if(t||a)return{fixed:!0,type:t?"radio":a?"checkbox":"",columnWidth:32,selectedRowKeys:C,onChange:function(t){Object(d.isEqual)(t,C)||(y(t),e.onSelectChange instanceof Function&&e.onSelectChange(t))}}}),[e.radioEnable,e.checkboxEnable,C]),P=Object(l.useMemo)((function(){var e=n.dataSource;return{tableConfig:u,dataSource:e,selectedKeys:C,selectedData:T,reload:function(){return g((function(e){return Object(o.a)({},e)}))}}}),[n.dataSource,u,C,T]);Object(l.useEffect)((function(){e.onRef instanceof Function&&e.onRef(P)}),[P]);var D=Object(l.useState)({x:void 0,y:void 0}),w=Object(s.a)(D,2),L=w[0],R=w[1];return Object(l.useEffect)((function(){var e={x:void 0,y:void 0},t=document.getElementsByClassName("list-table")[0],a=t.getElementsByTagName("table")[0];a.offsetWidth>t.clientWidth&&(e.x=!0),a.offsetHeight>t.clientHeight&&(e.y=!0),R((function(t){return Object(d.isEqual)(t,e)?t:e}))})),Object(b.jsx)(Oa.Provider,{value:P,children:Object(b.jsx)("div",{className:"list-table",children:Object(b.jsx)(re.a,{rowKey:"ID",dataSource:n.dataSource,columns:n.columns,pagination:!e.singlePageTable&&f,rowSelection:S,onRow:function(e){return{onClick:function(){M([n.dataSource.find((function(t){return t.ID===e.ID}))])}}},onChange:function(e){!Object(d.isEqual)(f,e)&&h(e)},scroll:L})})})};ma.defaultProps={singlePageTable:!1,radioEnable:!1,checkboxEnable:!1,selectedKeys:[]};var fa=ma;t.default=Object(i.a)((function(e){return Object(b.jsx)(te,{settings:[ee.b["COMMON/ZONE_TOOL_STYLE"]],children:"\u771f\u68d2"})}))}}]);
//# sourceMappingURL=5.9989bd80.chunk.js.map